<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\layout.tpl" */ ?>
<?php /*%%SmartyHeaderCode:54125c5a431678e850-85303670%%*/if(!defined('SMARTY_DIR')) exit('no direct access allowed');
$_valid = $_smarty_tpl->decodeProperties(array (
  'file_dependency' => 
  array (
    'be0cc1bd5634b28291837954a9e2da18429ad0a8' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\layout.tpl',
      1 => 1454620566,
      2 => 'file',
    ),
    'd0f4126392f913c1007023b8ffe905914ef95464' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\helpers\\abstracts\\preview_layout.tpl',
      1 => 1456000724,
      2 => 'file',
    ),
    'cd4b685db391d3421cac8e243a3973a689b38a8c' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\helpers\\lists\\next_prev.tpl',
      1 => 1453148944,
      2 => 'file',
    ),
    'e92b1d457f5f6c20433eca80653fc985b92f8a70' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\helpers\\attached_table.tpl',
      1 => 1454920038,
      2 => 'file',
    ),
    '1973c04d9124793e4d0487950013f9fad5cbafea' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\comments\\form.tpl',
      1 => 1454924966,
      2 => 'file',
    ),
    '4cbe2f6831a49f8a1898656116fa158db8110cd8' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\comments\\pane_toggler.tpl',
      1 => 1454682514,
      2 => 'file',
    ),
    '0fd9b03d47a815be22ead2d619ea3b673552f6ec' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\comments\\pane.tpl',
      1 => 1454682874,
      2 => 'file',
    ),
    'f08bb115535d245efc5341c84105c3ca9596bc33' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\navbar_actions.tpl',
      1 => 1450905962,
      2 => 'file',
    ),
    'f2a734b3c1d8319fb0b0768658e45887561b1181' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\main\\breadcrumb.tpl',
      1 => 1439414720,
      2 => 'file',
    ),
    'f8a4f305e0fa2c3164944ebdfd5395f86c322eab' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\helpers\\lists\\sortgroup.tpl',
      1 => 1449585076,
      2 => 'file',
    ),
    '84fe5f83a4dd87ae8bf64fcfee29dfddf108ef41' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\helpers\\alerts.tpl',
      1 => 1437603388,
      2 => 'file',
    ),
    '340027a973447a792f18f95b2ab443b704ab85b5' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\main\\title.tpl',
      1 => 1455627310,
      2 => 'file',
    ),
    '2cac61390e3f610e5ca896f61eb59d30cd3518dd' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\helpers\\forms\\demand_status.tpl',
      1 => 1449243522,
      2 => 'file',
    ),
    '62a15f262ae474832bd848b51b25253a8276d8aa' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\helpers\\forms\\demand_priority.tpl',
      1 => 1451393678,
      2 => 'file',
    ),
    'e64188f14230ac1e0c2374a9c646c9b1f9d62a99' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\helpers\\forms\\demand_criticality.tpl',
      1 => 1449243586,
      2 => 'file',
    ),
    '3f7aae84d559e21ae41b50f9840a888c36959dc5' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\block_demand.tpl',
      1 => 1453148300,
      2 => 'file',
    ),
    'c362893ec75a10d1293af700bbcacc072b0845da' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\helpers\\storage_url.tpl',
      1 => 1454590132,
      2 => 'file',
    ),
    'bfff2c6aa781c639261734615fe73b07ede1f2b2' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\helpers\\avatar.tpl',
      1 => 1452225012,
      2 => 'file',
    ),
    '7c77966dff30cb4c7bd79424e128089d8932f857' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\messages\\item.tpl',
      1 => 1459510672,
      2 => 'file',
    ),
    'c4c7b4fdc71dcccf7620c083395091963b344ad4' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\messages\\list.tpl',
      1 => 1450966356,
      2 => 'file',
    ),
    'a52b9bb959487b59ad8f6204bb8e3badd1fe36ea' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\block_messages.tpl',
      1 => 1433546168,
      2 => 'file',
    ),
    '2b74f6bceb3abd15809fac7dfe9392cf8669a650' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\todo\\form\\form.tpl',
      1 => 1449430378,
      2 => 'file',
    ),
    '63a09071882b6a04523cdcff0b186c95decf2504' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\todo\\list.tpl',
      1 => 1449484764,
      2 => 'file',
    ),
    '1cb3bdc9c7966c9304c6e4d62cf848195a886748' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\todo\\wrap.tpl',
      1 => 1449484060,
      2 => 'file',
    ),
    '7ba0ec120bbf6c23e6e03f5fabdf6803c0c78f34' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\block_checklist.tpl',
      1 => 1449480294,
      2 => 'file',
    ),
    '67662ba1c9720e954df48e9dc8bd47de3883191e' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\branch\\nestable.tpl',
      1 => 1450362482,
      2 => 'file',
    ),
    '42bcda3d900fe11a872756695f93cf29fb078350' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\branch\\wrap.tpl',
      1 => 1450880688,
      2 => 'file',
    ),
    '014b61ae58af9ff354861e99e56bf4f5a6eb3f2c' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\wrap.tpl',
      1 => 1450990796,
      2 => 'file',
    ),
    '28fa5ab32c8b716ab4f559e7beabe07bb09220bb' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\messages\\form.tpl',
      1 => 1434567080,
      2 => 'file',
    ),
    '20bd3715bfdaa14b9ed353b98bf0d59569715526' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\message_form_pane.tpl',
      1 => 1459510500,
      2 => 'file',
    ),
    'ea43dae0c1555b181f239be528f546351f9366ad' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\message_form_pane_toggler.tpl',
      1 => 1450880688,
      2 => 'file',
    ),
    'a999ddc96c3650ce37c4dbf527b16b2cab69b660' => 
    array (
      0 => 'W:\\home\\intrawork.loc\\app\\applications\\views\\templates\\demands\\view\\layout.tpl',
      1 => 1450880902,
      2 => 'file',
    ),
  ),
  'nocache_hash' => '54125c5a431678e850-85303670',
  'function' => 
  array (
  ),
  'variables' => 
  array (
    'controller_info' => 0,
    'layout_path' => 0,
    'layout_name' => 0,
    'conditions' => 0,
    'sort' => 0,
    'group' => 0,
  ),
  'has_nocache_code' => false,
  'version' => 'Smarty-3.1.21-dev',
  'unifunc' => 'content_5c5a431769c8a3_97050561',
),false); /*/%%SmartyHeaderCode%%*/?>
<?php if ($_valid && !is_callable('content_5c5a431769c8a3_97050561')) {function content_5c5a431769c8a3_97050561($_smarty_tpl) {?><?php if (!is_callable('smarty_modifier_replace')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.replace.php';
if (!is_callable('smarty_modifier_http_build_query')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.http_build_query.php';
?><?php $_smarty_tpl->tpl_vars["layout_name"] = new Smarty_variable(smarty_modifier_replace($_smarty_tpl->tpl_vars['controller_info']->value['module']['alias'],"/","-"), null, 0);?>
<?php $_smarty_tpl->tpl_vars["layout_path"] = new Smarty_variable($_smarty_tpl->tpl_vars['controller_info']->value['module']['alias'], null, 0);?>

<?php if ($_smarty_tpl->tpl_vars['controller_info']->value['pane']) {?>

    <div class="ui-layout-center animated fadeInDown">

        <div class="ui-layout-content jscroll-pager">
            <?php echo $_smarty_tpl->getSubTemplate ("main/title.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0);?>

            
            <?php echo $_smarty_tpl->getSubTemplate (((string)$_smarty_tpl->tpl_vars['layout_path']->value)."/list.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0);?>

        </div>

        <div class="ui-pane-footer" id="<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-pager" style="padding:5px; background-color: #f2f1ef">
                <div class="pull-left" style="width:220px;">
                    <div class="input-group input-group-sm">
                        <span class="input-group-btn">
                            <button class="btn btn-default btn-sm btn-page-prev"> <i class="fa fa-angle-double-left"></i> </button>
                        </span>
                        <span class="input-group-addon">Стр.</span>
                        <input type="text" class="form-control text-center input-sm current-page" value="1"  />
                        <span class="input-group-btn">
                            <button class="btn btn-default btn-page-search" type="button"><i class="fa fa-search"></i></button>
                        </span>
                        <span class="input-group-addon">из <span class="max-page"><?php echo ceil($_smarty_tpl->tpl_vars['controller_info']->value['total']/30);?>
</span></span>
                        <span class="input-group-btn">
                            <button class="btn btn-default btn-sm btn-page-next"> <i class="fa fa-angle-double-right"></i> </button>
                        </span>
                   </div>
                </div>
                <div class="pull-right text-center" style="width:60px">
                    <div class="btn-group">
                        <button class="btn btn-default btn-sm btn-cmp-prev"> <i class="fa fa-angle-left"></i> </button>
                        <button class="btn btn-default btn-sm btn-cmp-next"> <i class="fa fa-angle-right"></i> </button>
                    </div>
                </div>

                
    <div class="pull-right text-center" style="width:60px">
        <input id="demands-table-locked" data-size="small" data-toggle="toggle" data-on="<i class='fa fa-lock'></i>" data-off="<i class='fa fa-unlock-alt'></i>" type="checkbox" <?php if ($_smarty_tpl->tpl_vars['role_data']->value['filter']) {?>checked<?php }?> value="1">
    </div>


            <div class="clearfix"></div>
            </div>

    </div>

    
    <div class="ui-layout-east" >
        <?php /*  Call merged included template "demands/view/layout.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/layout.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('readonly'=>false), 0, '54125c5a431678e850-85303670');
content_5c5a431697abc4_00778336($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/layout.tpl" */?>
    </div>
    <?php echo '<script'; ?>
>
        $("#btn-message-form-pane-toggler").hide();
    <?php echo '</script'; ?>
>


    <?php echo '<script'; ?>
>
        $("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-table").jcatcher({
            source	: "<?php echo $_smarty_tpl->tpl_vars['layout_path']->value;?>
/view/%DATA_ID%/?render=<?php echo @constant('RENDER_JSON');?>
&pane=0<?php if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }
echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['sort']->value,"sort");?>
&<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['group']->value,"group");
}?>",
            wrap	: "<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-view-pane",
            empty   : "<?php echo $_smarty_tpl->tpl_vars['controller_info']->value['module']['name'];?>
 <?php echo L::text_not_selected_plural;?>
",
            morph   : ["<?php echo implode($_smarty_tpl->tpl_vars['controller_info']->value['module']['morph'],'","');?>
"],

            $paging: $("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-pager"),
            conditions: '<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }
echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['sort']->value,"sort");?>
&<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['group']->value,"group");?>
',


            callback_begin     : function(selected_id, selected_e) {
                document.title = 'Загрузка...';
                $("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-view-pane").find(".ui-pane-header-pager:visible").hide();

                <?php if ($_smarty_tpl->tpl_vars['controller_info']->value['module']['comments']) {?>
                    commentsIW.hide_toggler();
                <?php }?>

                
    var demands_layout = pageLayout.center.children.super_middle_layout.center.children.middle_layout.east.children.demands_layout;
    $("#btn-message-form-pane-toggler").slideUp();
    demands_layout.hide('south');
    demands_layout.hide('north');

            },

            callback_end: function(data_id, response, e) {

                $("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-view-pane").find(".ui-pane-header-pager:hidden").show();
                // В next_prev.tpl
                if(typeof np_calc == 'function') {
                    np_calc(data_id);
                }

                <?php if ($_smarty_tpl->tpl_vars['controller_info']->value['module']['comments']) {?>
                    commentsIW.set_owner(data_id);
                    commentsIW.show_toggler();
                <?php }?>

                

    DemandIW.set_demand_id(response.demand.id);
    DemandIW.start_observer();

    $("#demands-view-pane:not(.bg-light-muted)").addClass("bg-light-muted");

    if (!response.readonly) {
        $("#demands-navbar-pane").html(response.navbar_actions);
        var demands_layout = pageLayout.center.children.super_middle_layout.center.children.middle_layout.east.children.demands_layout;
        demands_layout.open('north');
    }

    DemandIW.get_member_options();
    $("#btn-message-form-pane-toggler").slideDown();

    /*$('#modal-remote').on('show.bs.modal', function () {
    console.log($(this).find("button:submit"), $(this));
    });*/

    //get_member_options();



            },

            callback_empty: function() {
                $("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-view-pane").find(".ui-pane-header-pager:visible").hide();
                <?php if ($_smarty_tpl->tpl_vars['controller_info']->value['module']['comments']) {?>
                    commentsIW.hide_toggler();
                <?php }?>

                

    DemandIW.set_demand_id(0);
    DemandIW.stop_observer();

    if (typeof CoreIW === "undefined") return;

    var demands_layout = pageLayout.center.children.super_middle_layout.center.children.middle_layout.east.children.demands_layout;
    $("#btn-message-form-pane-toggler").slideUp();
    demands_layout.hide('south');
    demands_layout.hide('north');

            },

            callback_complete: function(selected_id, response, selected_e) {
                document.title = decode_entities($("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-view-pane").find(".title").html().replace(/<[^>]+>/g,''));
                $("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-view-pane").find(".page-heading .delete-record").on("click", function(e) {
                    e.stopPropagation();
                    $(selected_e).find(".btn-group a.delete-record").click();
                    return false;
                });

                $("body").trigger("previewLoaded.content");
                $("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-view-pane").find(".ui-layout-content").scrollTo(0, 800);
                
                
            }
        });
    <?php echo '</script'; ?>
>
<?php } else { ?>
    <?php echo $_smarty_tpl->getSubTemplate ("main/title.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0);?>

    <?php echo $_smarty_tpl->getSubTemplate (((string)$_smarty_tpl->tpl_vars['layout_name']->value)."/list.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0);?>

<?php }?>

<?php echo '<script'; ?>
>

    
    $(document).on("click", "#demand-tuning-form button:submit", function() {
        DemandIW.save($("#demand-tuning-form"), $(this), function() {
            $('#modal-remote').modal("hide");
        });
        return false;
    });

    function catch_member_demands() {
        $("#sidebar-block-demands-member").find("a.dmd-item").on("click", function() {
            DemandIW.find($(this).data("id"), "<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }
echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['sort']->value,"sort");?>
", $(this).attr('href'));
            return false;
        });
    }

    $("body").on("reload_member.sidebar", function() { catch_member_demands(); });
    $("body").on("init.layout", function() { catch_member_demands(); });



    $('body').bind('init.layout', function(event){
        $('.jscroll-pager').jscroll({
            autoTrigger: false,
            $paging: $("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-pager"),
            replace: true,
            page_url_template: '<?php echo $_smarty_tpl->tpl_vars['layout_path']->value;?>
/?render=4&page=%PAGE%&continue=true&<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['sort']->value) {?>&<?php }
echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['sort']->value,"sort");?>
'
        });

        /*var selected = $.cookie('jcatcher-selected');
        if (selected != undefined) {
            DemandIW.find(selected, "<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }
echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['sort']->value,"sort");?>
", null);
        }*/
    });


    $("#prev-next-nav").find(".previous:not(:disabled)").on("click", function(){
        if (!$("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-table").jcatcher.prev()) {
            $(this).addClass("disabled");
            toastr.info('Достигнуто начало списка', 'Переход на предыдущую запись');
        }
        return false;
    });

    $("#prev-next-nav").find(".next:not(:disabled)").on("click", function(){
        if (!$("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-table").jcatcher.next()) {
            $(this).addClass("disabled");
            toastr.info('Достигнут конец списка', 'Переход на следующую запись');
        }
        return false;
    });

    $("#<?php echo $_smarty_tpl->tpl_vars['layout_name']->value;?>
-table").closest(".jscroll-pager").on("jscroll-after-append", function(event, args) {
        
    CoreIW.init_donuts(args.context);

    });
<?php echo '</script'; ?>
>


<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\helpers\lists\next_prev.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a431685d909_05248173')) {function content_5c5a431685d909_05248173($_smarty_tpl) {?><?php if (!is_callable('smarty_modifier_mb_ucfirst')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.mb_ucfirst.php';
if (!is_callable('smarty_modifier_http_build_query')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.http_build_query.php';
?><ul class="pager clamped list-inline " id="prev-next-nav" style="font-size:13px;">
    <li class="previous disabled"><a href="#">&larr; Назад</a></li>
    <li class="hidden-xs">
        <?php echo smarty_modifier_mb_ucfirst($_smarty_tpl->tpl_vars['controller_info']->value['module']['morph'][0]);?>

    </li>
    <li>
        <span class="rownum">0</span> из <a href="<?php echo $_smarty_tpl->tpl_vars['controller_info']->value['module']['alias'];?>
/<?php if ($_smarty_tpl->tpl_vars['conditions']->value) {?>?<?php }
echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php } else { ?>?<?php }
echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['sort']->value,"sort");?>
"><span class="total">0</span></a>
        
    </li>
    <li class="next disabled"><a href="#">Вперед &rarr;</a></li>
</ul>
<div class="clearfix"></div>

<?php if ($_smarty_tpl->tpl_vars['np_calc']->value) {?>
<?php echo '<script'; ?>
>

    $("#prev-next-nav").on("click", ".previous.disabled a, .next.disabled a", function() { return false; });

    function np_calc(id) {
        $("#prev-next-nav").find(".rownum").html('<i class="fa fa-spinner fa-spin"></i>');
        $("#prev-next-nav").find(".total").html('<i class="fa fa-spinner fa-spin"></i>');
        $("#prev-next-nav").find(".previous").addClass("disabled");
        $("#prev-next-nav").find(".next").addClass("disabled");

        var query = "<?php if ($_smarty_tpl->tpl_vars['conditions']->value) {?>?<?php }
echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php } else { ?>?<?php }
echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['sort']->value,"sort");?>
&<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['group']->value,"group");?>
";
        $.ajax({
            url: "/<?php echo $_smarty_tpl->tpl_vars['controller_info']->value['module']['alias'];?>
/view/"+id+"/get_next_prev_id/",
            dataType: 'json',
            method: 'get',
            data: "<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }
echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['sort']->value,"sort");?>
&<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['group']->value,"group");?>
",
            success: function (response) {
                if (response.status == 200) {

                    if (response.data.prev) {
                        $("#prev-next-nav").find(".previous").removeClass("disabled").children("a").attr("href", "<?php echo $_smarty_tpl->tpl_vars['controller_info']->value['module']['alias'];?>
/view/"+response.data.prev+"/"+query);
                    }

                    if (response.data.next) {
                        $("#prev-next-nav").find(".next").removeClass("disabled").children("a").attr("href", "<?php echo $_smarty_tpl->tpl_vars['controller_info']->value['module']['alias'];?>
/view/"+response.data.next+"/"+query);
                    }

                    $("#prev-next-nav").find(".rownum").html(response.data.rownum);
                    $("#prev-next-nav").find(".total").html(response.data.total);

                } else {
                    toastr.error("Ошибка получения позиции компании в списке", "Позиция");

                }
            }
        });
    }

    <?php if ($_smarty_tpl->tpl_vars['id']->value) {?>
    $(document).ready(function() {
        np_calc(<?php echo $_smarty_tpl->tpl_vars['id']->value;?>
);
    });
    <?php }?>

<?php echo '</script'; ?>
>
<?php }?>
<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\comments\pane.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a43168f9d23_06599332')) {function content_5c5a43168f9d23_06599332($_smarty_tpl) {?><form id="comment-form">
    <div class="ui-layout-south pane-content-sm" id="comment-form-pane">
        <?php /*  Call merged included template "./form.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("./form.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4316901a20_61249672($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "./form.tpl" */?>
    </div>
</form>

<?php /*  Call merged included template "./pane_toggler.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("./pane_toggler.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a43169346b1_26624114($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "./pane_toggler.tpl" */?>

<?php echo '<script'; ?>
 src="resources/js/intrawork.comments.js"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
>
    $(function () {
        commentsIW.init('<?php echo $_smarty_tpl->tpl_vars['controller_info']->value['module']['alias'];?>
', <?php echo $_smarty_tpl->tpl_vars['controller_info']->value['module_id'];?>
, <?php echo intval($_smarty_tpl->tpl_vars['owner_id']->value);?>
);
    });
<?php echo '</script'; ?>
>
<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\comments\form.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4316901a20_61249672')) {function content_5c5a4316901a20_61249672($_smarty_tpl) {?>

<div class="container-fluid">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#form" data-toggle="tab"><?php echo L::tabs_message;?>
</a></li>
        <li><a href="#attach" data-toggle="tab"><?php echo L::tabs_files;?>
</a></li>
        <li class="pull-right">
            <button class="btn btn-default btn-sm btn-comment-pane-toggler pull-right">
                <i class="fa fa-times"></i><span class="hidden-xs"> <?php echo L::text_close;?>
</span>
            </button>
        </li>
    </ul>
</div>

<div class="ui-layout-content">
    <div class="container-fluid">
        <div class="tab-content">
            <div class="tab-pane active" id="form">
                <textarea name="comment_data[text]" style="border:0px; height: 99%; width:100%" placeholder="Нажмите CTRL+Enter отправки сообщения"></textarea>
            </div>
            <div class="tab-pane" id="attach">
                <?php /*  Call merged included template "helpers/attached_table.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/attached_table.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4316911423_67416942($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/attached_table.tpl" */?>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="space space-xs"></div>

    <div class="form-inline row">
        <div class="form-group  col-sm-12">
            <button type="submit" class="btn btn-primary" data-loading-text="Отправка, ждите..."><i class="fa fa-send"></i> Отправить</button>
        </div>

    </div>

</div>

<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\helpers\attached_table.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4316911423_67416942')) {function content_5c5a4316911423_67416942($_smarty_tpl) {?><table id="attach_files" role="presentation" class="table table-striped <?php if (!$_smarty_tpl->tpl_vars['tender_data']->value['attach_files']) {?>hidden<?php }?>">
    
</table>

<div class="row">
    <div class="col-sm-4 col-md-4 col-lg-4">
		<span class="btn btn-default fileinput-button" id="fileinput-button">
			<span><?php echo L::text_add_files;?>
</span>
			<input id="fileupload" type="file" name="file" multiple="" data-url="<?php echo $_smarty_tpl->tpl_vars['controller_info']->value['module']['alias'];?>
/create/attach/">
		</span>
        
    </div>
    <div class="col-sm-8 hidden" id="progress-upload">
        <div id="progress-upload-files" class="progress progress-striped active">
            <div class="progress-bar progress-bar-success"  aria-valuemin="0" aria-valuemax="100" style="width: 0%;">0%</div>
        </div>
        <div id="progress-upload-files-status">Загружено: 0 / 0</div>
    </div>
</div>





<?php echo '<script'; ?>
 src="min/?g=fileuploadjs"><?php echo '</script'; ?>
>
<?php echo '<script'; ?>
 src="resources/js/jquery/plugin/fileupload/js/jquery.client.js"><?php echo '</script'; ?>
>
<link href="min/?g=fileuploadcss" type="text/css" rel="stylesheet" />

<?php echo '<script'; ?>
>

<?php echo '</script'; ?>
>


<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\comments\pane_toggler.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a43169346b1_26624114')) {function content_5c5a43169346b1_26624114($_smarty_tpl) {?><button id="btn-comment-pane-toggler" class="btn btn-success btn-xs btn-comment-pane-toggler">Добавить комментарий</button>

<style>
    #btn-comment-pane-toggler {
        position: absolute; z-index:5; left:50%;
        margin-left:-75px;
        width:150px;
        bottom:0;
        /*-webkit-border-radius: 4px 4px 0 0;
        -moz-border-radius: 4px 4px 0 0;
        border-radius: 4px 4px 0 0;*/
        border-radius: 0;
    }
</style>
<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\layout.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a431697abc4_00778336')) {function content_5c5a431697abc4_00778336($_smarty_tpl) {?><?php if ($_smarty_tpl->tpl_vars['controller_info']->value['pane']) {?>

    <?php if (!$_smarty_tpl->tpl_vars['readonly']->value) {?>
	<div class="ui-layout-north overflow-hidden" id="demands-navbar-pane">

        <?php if ($_smarty_tpl->tpl_vars['demand_data']->value) {?>
		    <?php /*  Call merged included template "demands/view/navbar_actions.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/navbar_actions.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a431698a5c7_05818503($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/navbar_actions.tpl" */?>
        <?php }?>
	</div>
    <?php }?>

    <?php if ($_smarty_tpl->tpl_vars['demand_data']->value) {?>
		<div class="ui-layout-center layout-preview bg-light-muted " id="demands-view-pane">
            <div class="ui-pane-header ui-pane-header-pager">
                <?php /*  Call merged included template "helpers/lists/next_prev.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/lists/next_prev.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('np_calc'=>true,'id'=>$_smarty_tpl->tpl_vars['demand_data']->value['id']), 0, '54125c5a431678e850-85303670');
content_5c5a431685d909_05248173($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/lists/next_prev.tpl" */?>
            </div>
            <div class="ui-layout-content preview-container">
                <?php /*  Call merged included template "main/title.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("main/title.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('light'=>true), 0, '54125c5a431678e850-85303670');
content_5c5a4316a1ece4_39399565($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "main/title.tpl" */?>
                <?php /*  Call merged included template "demands/view/wrap.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/wrap.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4316dbca41_23093981($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/wrap.tpl" */?>
            </div>
        </div>
    <?php } else { ?>
		<div class="ui-layout-center layout-preview bg-muted" id="demands-view-pane" >
            <div class="ui-pane-header ui-pane-header-pager" style="display: none"><?php /*  Call merged included template "helpers/lists/next_prev.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/lists/next_prev.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('np_calc'=>true), 0, '54125c5a431678e850-85303670');
content_5c5a431685d909_05248173($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/lists/next_prev.tpl" */?></div>
            <div class="ui-layout-content preview-container cm-container"></div>
		</div>
	<?php }?>

     
        <form id="message-form">
        <div class="ui-layout-south pane-content-sm" id="message-form-pane">
            <?php /*  Call merged included template "demands/view/message_form_pane.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/message_form_pane.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4317506449_10961914($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/message_form_pane.tpl" */?>
        </div>
        </form>


        <?php /*  Call merged included template "demands/view/message_form_pane_toggler.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/message_form_pane_toggler.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4317535251_28307283($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/message_form_pane_toggler.tpl" */?>

        <?php echo '<script'; ?>
 src="resources/js/intrawork.demand.js"><?php echo '</script'; ?>
>
        <?php echo '<script'; ?>
>
            DemandIW.init();
            <?php if ($_smarty_tpl->tpl_vars['demand_data']->value) {?>
                DemandIW.set_demand_id(<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['id'];?>
);
                DemandIW.start_observer();
                DemandIW.get_member_options();
            <?php }?>
        <?php echo '</script'; ?>
>
    
<?php } else { ?>
    <?php /*  Call merged included template "main/title.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("main/title.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('light'=>true), 0, '54125c5a431678e850-85303670');
content_5c5a4316a1ece4_39399565($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "main/title.tpl" */?>
    <?php /*  Call merged included template "demands/view/wrap.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/wrap.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4316dbca41_23093981($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/wrap.tpl" */?>
<?php }?>


<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\navbar_actions.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a431698a5c7_05818503')) {function content_5c5a431698a5c7_05818503($_smarty_tpl) {?><nav class="navbar navbar-more navbar-inside clamped border-bottom bg-<?php echo m_demands::$ar_status[$_smarty_tpl->tpl_vars['demand_data']->value['status']]['color'];?>
" role="navigation">
	<div class="container-fluid ">
		<div>
			<ul class="nav navbar-nav navbar-left navbar-statuses">
                
                <?php  $_smarty_tpl->tpl_vars['status'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['status']->_loop = false;
 $_smarty_tpl->tpl_vars['status_id'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['ar_type_current_ts']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['status']->key => $_smarty_tpl->tpl_vars['status']->value) {
$_smarty_tpl->tpl_vars['status']->_loop = true;
 $_smarty_tpl->tpl_vars['status_id']->value = $_smarty_tpl->tpl_vars['status']->key;
?>
                    <li <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['status']==$_smarty_tpl->tpl_vars['status_id']->value) {?>class="active bg-<?php echo m_demands::$ar_status[$_smarty_tpl->tpl_vars['status_id']->value]['color'];?>
"<?php }?>>
                        
                        <a data-color="<?php echo $_smarty_tpl->tpl_vars['status']->value['color'];?>
" <?php if (($_smarty_tpl->tpl_vars['status_id']->value==m_demands::STATUS_WORK)&&!$_smarty_tpl->tpl_vars['demand_data']->value['required_time']) {?>class="tuning" data-remote="demands/tuning/<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['id'];?>
/?demand_data[status]=<?php echo $_smarty_tpl->tpl_vars['status_id']->value;
if (!$_smarty_tpl->tpl_vars['demand_data']->value['eu_eid']) {?>&demand_data[eu_eid]=<?php echo $_smarty_tpl->tpl_vars['cuser_data']->value['eid'];
}?>" href="#modal-remote" data-toggle="modal" class="tuning"<?php } else { ?>href="#"<?php }?> data-status="<?php echo $_smarty_tpl->tpl_vars['status_id']->value;?>
" >
                            <i class="fa fa-fw fa-<?php echo $_smarty_tpl->tpl_vars['status']->value['icon'];?>
"></i> <span><?php echo $_smarty_tpl->tpl_vars['status']->value['name'];?>
</span>
                        </a>
                    </li>
                <?php } ?>

			</ul>
            
		</div>
	</div>
</nav>


<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\main\title.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4316a1ece4_39399565')) {function content_5c5a4316a1ece4_39399565($_smarty_tpl) {?><?php if (!is_callable('smarty_modifier_declension')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.declension.php';
?>


<?php if (@constant('RENDER_MODE')!=@constant('RENDER_MODAL')) {?>
	<div class="container-fluid">
		<div class="page-heading">
            <table class="page-heading-table" width="100%">
                <colgroup>
                    <col width="*" />
                </colgroup>
                <tr>
                    <td>
                        <div class="title">
                            <?php if ($_smarty_tpl->tpl_vars['controller_info']->value['title']) {
echo $_smarty_tpl->tpl_vars['controller_info']->value['title'];
} else {
echo L::text_unknown_controller;?>
!<?php }?>
                        </div>
                        <?php if ($_smarty_tpl->tpl_vars['controller_info']->value['total']) {?>
                            <?php $_smarty_tpl->tpl_vars["object_morph"] = new Smarty_variable(implode($_smarty_tpl->tpl_vars['controller_info']->value['module']['morph'],";"), null, 0);?>

                            <div class="small">
                                <?php if ($_smarty_tpl->tpl_vars['conditions']->value) {
echo L::text_found_total_conditions;
} else {
echo L::text_found_total;
}?> &mdash; <?php echo $_smarty_tpl->tpl_vars['controller_info']->value['total'];?>
 <?php echo smarty_modifier_declension($_smarty_tpl->tpl_vars['controller_info']->value['total'],$_smarty_tpl->tpl_vars['object_morph']->value);?>

                            </div>
                        <?php }?>
                    </td>
                    <td class="text-right" nowrap="true" valign="top">
                        <?php if ($_smarty_tpl->tpl_vars['controller_info']->value['actions']) {?>
                            <div class="action-block">
                                <?php  $_smarty_tpl->tpl_vars['action'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['action']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['controller_info']->value['actions']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['action']->key => $_smarty_tpl->tpl_vars['action']->value) {
$_smarty_tpl->tpl_vars['action']->_loop = true;
?>
                                    <a <?php if ($_smarty_tpl->tpl_vars['action']->value['data']) {
$_smarty_tpl->tpl_vars['value'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['value']->_loop = false;
 $_smarty_tpl->tpl_vars['name'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['action']->value['data']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['value']->key => $_smarty_tpl->tpl_vars['value']->value) {
$_smarty_tpl->tpl_vars['value']->_loop = true;
 $_smarty_tpl->tpl_vars['name']->value = $_smarty_tpl->tpl_vars['value']->key;
?>data-<?php echo $_smarty_tpl->tpl_vars['name']->value;?>
="<?php echo $_smarty_tpl->tpl_vars['value']->value;?>
"<?php }
}?> <?php if ($_smarty_tpl->tpl_vars['action']->value['modal']) {
if (!$_smarty_tpl->tpl_vars['action']->value['inline']) {?>href="#modal-remote" data-remote="<?php echo $_smarty_tpl->tpl_vars['action']->value['href'];?>
"<?php } else { ?>href="<?php echo $_smarty_tpl->tpl_vars['action']->value['href'];?>
"<?php }?> data-toggle="modal"<?php } else { ?>href="<?php echo $_smarty_tpl->tpl_vars['action']->value['href'];?>
" <?php if ($_smarty_tpl->tpl_vars['action']->value['delete']) {?>data-callback="deleted_record" data-confirm-title="<?php echo L::crud_delete;?>
 <?php if ($_smarty_tpl->tpl_vars['controller_info']->value['module']) {
echo $_smarty_tpl->tpl_vars['controller_info']->value['module']['morph'][1];
} else {
echo L::text_object_morph_two;
}?>" data-confirm="<?php echo L::confirm_delete_message;?>
"<?php }
}?> class="btn btn-<?php if ($_smarty_tpl->tpl_vars['action']->value['type']) {
echo $_smarty_tpl->tpl_vars['action']->value['type'];
} else { ?>default<?php }?> btn-sm<?php if ($_smarty_tpl->tpl_vars['action']->value['class']) {?> <?php echo $_smarty_tpl->tpl_vars['action']->value['class'];
}
if ($_smarty_tpl->tpl_vars['action']->value['delete']) {?> ajaxcall delete-record<?php }?>" title="<?php echo preg_replace('!<[^>]*?>!', ' ', $_smarty_tpl->tpl_vars['action']->value['name']);?>
"><?php if ($_smarty_tpl->tpl_vars['action']->value['icon']) {?><i class="fa fa-<?php echo $_smarty_tpl->tpl_vars['action']->value['icon'];?>
"></i> <?php }
echo $_smarty_tpl->tpl_vars['action']->value['name'];?>
</a>
                                <?php } ?>
                            </div>
                        <?php }?>
                    </td>
                </tr>
            </table>
    		<div class="clearfix"></div>
		</div>
	</div>

    <?php if ($_smarty_tpl->tpl_vars['controller_info']->value['module_id']) {?>
    <?php echo '<script'; ?>
>
        var module_alias = '<?php echo $_smarty_tpl->tpl_vars['controller_info']->value['module']['alias'];?>
';
        function deleted_record() {
            location.href = module_alias+'/';
        }
    <?php echo '</script'; ?>
>
    <?php }?>

	<?php if ($_smarty_tpl->tpl_vars['breadcrumb']->value!==false) {?>
        <div class="pull-left"><?php /*  Call merged included template "main/breadcrumb.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("main/breadcrumb.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4316b01626_53708371($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "main/breadcrumb.tpl" */?></div>
	<?php }?>

    <?php /*  Call merged included template "helpers/lists/sortgroup.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/lists/sortgroup.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('ar_sort'=>$_smarty_tpl->tpl_vars['controller_info']->value['ar_sort'],'ar_group'=>$_smarty_tpl->tpl_vars['controller_info']->value['ar_group']), 0, '54125c5a431678e850-85303670');
content_5c5a4316b5f230_80809909($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/lists/sortgroup.tpl" */?>

    


    <div class="clearfix"></div>
<?php }?>

<?php if ($_smarty_tpl->tpl_vars['system_alerts']->value) {?>
    <div class="container-fluid">
        <?php /*  Call merged included template "helpers/alerts.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/alerts.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4316cc6882_20983916($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/alerts.tpl" */?>
    </div>
    <div class="space"></div>
<?php }?>
<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\main\breadcrumb.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4316b01626_53708371')) {function content_5c5a4316b01626_53708371($_smarty_tpl) {?>
<ul class="breadcrumb">
	<li><a href="<?php echo @constant('HOST_ROOT');?>
"><?php echo L::intrawork;?>
</a></li>
	<?php if ($_smarty_tpl->tpl_vars['controller_info']->value['path']) {?>
		<?php  $_smarty_tpl->tpl_vars['crump'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['crump']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['controller_info']->value['path']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
 $_smarty_tpl->tpl_vars['crump']->total= $_smarty_tpl->_count($_from);
 $_smarty_tpl->tpl_vars['crump']->index=-1;
foreach ($_from as $_smarty_tpl->tpl_vars['crump']->key => $_smarty_tpl->tpl_vars['crump']->value) {
$_smarty_tpl->tpl_vars['crump']->_loop = true;
 $_smarty_tpl->tpl_vars['crump']->index++;
?>
            <?php if ($_smarty_tpl->tpl_vars['crump']->total>4&&$_smarty_tpl->tpl_vars['crump']->index==2) {?>
                <li><a href="#" onclick="$(this).closest('ul').find('li.hidden').removeClass('hidden'); $(this).parent().remove(); return false;">...</a></li>
            <?php }?>

			<li <?php if ($_smarty_tpl->tpl_vars['crump']->total>4&&$_smarty_tpl->tpl_vars['crump']->index>1&&$_smarty_tpl->tpl_vars['crump']->index<$_smarty_tpl->tpl_vars['crump']->total-1) {?>class="hidden"<?php }?>>
                <?php if ($_smarty_tpl->tpl_vars['crump']->value['icon']) {?><i class="fa text-muted <?php echo $_smarty_tpl->tpl_vars['crump']->value['icon'];?>
"></i>&nbsp;<?php }?><a <?php if ($_smarty_tpl->tpl_vars['crump']->value['muted']) {?>class="text-muted"<?php }?> href="<?php echo $_smarty_tpl->tpl_vars['crump']->value['url'];?>
"><?php echo $_smarty_tpl->tpl_vars['crump']->value['title'];?>
</a>
            </li>
		<?php } ?>
	<?php }?>

	<li><?php echo $_smarty_tpl->tpl_vars['controller_info']->value['title'];?>
</li>
</ul>
<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\helpers\lists\sortgroup.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4316b5f230_80809909')) {function content_5c5a4316b5f230_80809909($_smarty_tpl) {?><?php if (!is_callable('smarty_modifier_http_build_query')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.http_build_query.php';
?>

        

<?php if ($_smarty_tpl->tpl_vars['ar_sort']->value) {?>
    <div class="pull-right">
        <div class="btn-group btn-group-sm">
            <button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown" title="Сортировка">
                <i class="fa fa-sort-amount-<?php if ($_smarty_tpl->tpl_vars['sort']->value['dir']==@constant('SORT_ASC_AZ')) {?>asc<?php } else { ?>desc<?php }?>"></i><span class="hidden-xs"> <?php echo $_smarty_tpl->tpl_vars['ar_sort']->value[$_smarty_tpl->tpl_vars['sort']->value['by']]['name'];?>
</span> <span class="caret"></span>
            </button>
    
            <ul class="dropdown-menu dropdown-menu-right dropdown-menu-wauto" role="menu">
                <?php  $_smarty_tpl->tpl_vars['sort_item'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['sort_item']->_loop = false;
 $_smarty_tpl->tpl_vars['by'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['ar_sort']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['sort_item']->key => $_smarty_tpl->tpl_vars['sort_item']->value) {
$_smarty_tpl->tpl_vars['sort_item']->_loop = true;
 $_smarty_tpl->tpl_vars['by']->value = $_smarty_tpl->tpl_vars['sort_item']->key;
?>
                <li <?php if ($_smarty_tpl->tpl_vars['sort']->value['by']==$_smarty_tpl->tpl_vars['by']->value) {?>class="active"<?php }?>><a href="<?php echo $_smarty_tpl->tpl_vars['current_url_path']->value;?>
?<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }?>sort[by]=<?php echo $_smarty_tpl->tpl_vars['by']->value;?>
&sort[dir]=<?php echo $_smarty_tpl->tpl_vars['sort']->value['dir'];?>
"><?php echo $_smarty_tpl->tpl_vars['sort_item']->value['name'];?>
</a></li>
                <?php } ?>
    
                <li class="divider"></li>
    
                <li <?php if ($_smarty_tpl->tpl_vars['sort']->value['dir']==@constant('SORT_ASC_AZ')) {?>class="active"<?php }?>><a href="<?php echo $_smarty_tpl->tpl_vars['current_url_path']->value;?>
?<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }?>sort[by]=<?php echo $_smarty_tpl->tpl_vars['sort']->value['by'];?>
&sort[dir]=<?php echo @constant('SORT_ASC_AZ');?>
"><i class="fa fa-sort-amount-asc"></i> <?php echo L::sort_asc;?>
</a></li>
                <li <?php if ($_smarty_tpl->tpl_vars['sort']->value['dir']==@constant('SORT_DSC_ZA')) {?>class="active"<?php }?>><a href="<?php echo $_smarty_tpl->tpl_vars['current_url_path']->value;?>
?<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }?>sort[by]=<?php echo $_smarty_tpl->tpl_vars['sort']->value['by'];?>
&sort[dir]=<?php echo @constant('SORT_DSC_ZA');?>
"><i class="fa fa-sort-amount-desc"></i> <?php echo L::sort_desc;?>
</a></li>
            </ul>
        </div>
    </div>
<?php }?>

<?php if ($_smarty_tpl->tpl_vars['ar_group']->value) {?>
    <div class="pull-right">
        <div class="btn-group btn-group-sm">
            <button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown" title="Группировка">
                
                <i class="fa fa-object-ungroup"></i><span class="hidden-xs"> <?php echo (($tmp = @$_smarty_tpl->tpl_vars['ar_group']->value[$_smarty_tpl->tpl_vars['group']->value['by']]['name'])===null||$tmp==='' ? "Нет" : $tmp);?>
</span> <span class="caret"></span>
            </button>

            <ul class="dropdown-menu dropdown-menu-right dropdown-menu-wauto" role="menu">
                <li <?php if (!$_smarty_tpl->tpl_vars['group']->value['by']||$_smarty_tpl->tpl_vars['group']->value['by']=="none") {?>class="active"<?php }?>><a href="<?php echo $_smarty_tpl->tpl_vars['current_url_path']->value;?>
?<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }?>group[by]=none">Нет</a></li>
                <li class="divider"></li>

                <?php  $_smarty_tpl->tpl_vars['group_item'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['group_item']->_loop = false;
 $_smarty_tpl->tpl_vars['by'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['ar_group']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['group_item']->key => $_smarty_tpl->tpl_vars['group_item']->value) {
$_smarty_tpl->tpl_vars['group_item']->_loop = true;
 $_smarty_tpl->tpl_vars['by']->value = $_smarty_tpl->tpl_vars['group_item']->key;
?>
                    <li <?php if ($_smarty_tpl->tpl_vars['group']->value['by']==$_smarty_tpl->tpl_vars['by']->value) {?>class="active"<?php }?>><a href="<?php echo $_smarty_tpl->tpl_vars['current_url_path']->value;?>
?<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }?>group[by]=<?php echo $_smarty_tpl->tpl_vars['by']->value;?>
&group[dir]=<?php echo $_smarty_tpl->tpl_vars['group']->value['dir'];?>
"><?php echo $_smarty_tpl->tpl_vars['group_item']->value['name'];?>
</a></li>
                <?php } ?>

                <li class="divider"></li>

                <li <?php if ($_smarty_tpl->tpl_vars['group']->value['dir']==@constant('SORT_ASC_AZ')) {?>class="active"<?php }?>><a href="<?php echo $_smarty_tpl->tpl_vars['current_url_path']->value;?>
?<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }?>group[by]=<?php echo $_smarty_tpl->tpl_vars['group']->value['by'];?>
&group[dir]=<?php echo @constant('SORT_ASC_AZ');?>
"><i class="fa fa-sort-amount-asc"></i> <?php echo L::sort_asc;?>
</a></li>
                <li <?php if ($_smarty_tpl->tpl_vars['group']->value['dir']==@constant('SORT_DSC_ZA')) {?>class="active"<?php }?>><a href="<?php echo $_smarty_tpl->tpl_vars['current_url_path']->value;?>
?<?php echo smarty_modifier_http_build_query($_smarty_tpl->tpl_vars['conditions']->value,"cnd");
if ($_smarty_tpl->tpl_vars['conditions']->value) {?>&<?php }?>group[by]=<?php echo $_smarty_tpl->tpl_vars['group']->value['by'];?>
&group[dir]=<?php echo @constant('SORT_DSC_ZA');?>
"><i class="fa fa-sort-amount-desc"></i> <?php echo L::sort_desc;?>
</a></li>
            </ul>
        </div>
    </div>
<?php }?>


<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\helpers\alerts.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4316cc6882_20983916')) {function content_5c5a4316cc6882_20983916($_smarty_tpl) {?><?php if (!is_callable('smarty_modifier_date_format')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.date_format.php';
?><?php  $_smarty_tpl->tpl_vars['alerts'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['alerts']->_loop = false;
 $_smarty_tpl->tpl_vars['type'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['system_alerts']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
 $_smarty_tpl->tpl_vars['alerts']->total= $_smarty_tpl->_count($_from);
 $_smarty_tpl->tpl_vars['alerts']->iteration=0;
foreach ($_from as $_smarty_tpl->tpl_vars['alerts']->key => $_smarty_tpl->tpl_vars['alerts']->value) {
$_smarty_tpl->tpl_vars['alerts']->_loop = true;
 $_smarty_tpl->tpl_vars['type']->value = $_smarty_tpl->tpl_vars['alerts']->key;
 $_smarty_tpl->tpl_vars['alerts']->iteration++;
 $_smarty_tpl->tpl_vars['alerts']->last = $_smarty_tpl->tpl_vars['alerts']->iteration === $_smarty_tpl->tpl_vars['alerts']->total;
 $_smarty_tpl->tpl_vars['smarty']->value['foreach']['alert_types']['last'] = $_smarty_tpl->tpl_vars['alerts']->last;
?>

    <?php if ($_smarty_tpl->tpl_vars['type']->value==@constant('ALERT_SUCCESS')) {?>
        <?php $_smarty_tpl->tpl_vars["alert_type"] = new Smarty_variable("success", null, 0);?>
        <?php $_smarty_tpl->tpl_vars["alert_title"] = new Smarty_variable("Сообщение", null, 0);?>
    <?php } elseif ($_smarty_tpl->tpl_vars['type']->value==@constant('ALERT_WARNING')) {?>
        <?php $_smarty_tpl->tpl_vars["alert_type"] = new Smarty_variable("warning", null, 0);?>
        <?php $_smarty_tpl->tpl_vars["alert_title"] = new Smarty_variable("Внимание", null, 0);?>
    <?php } elseif ($_smarty_tpl->tpl_vars['type']->value==@constant('ALERT_ERROR')) {?>
        <?php $_smarty_tpl->tpl_vars["alert_type"] = new Smarty_variable("danger", null, 0);?>
        <?php $_smarty_tpl->tpl_vars["alert_title"] = new Smarty_variable("Обнаружены ошибки", null, 0);?>
    <?php } elseif ($_smarty_tpl->tpl_vars['type']->value==@constant('ALERT_DANGER')) {?>
        <?php $_smarty_tpl->tpl_vars["alert_type"] = new Smarty_variable("danger", null, 0);?>
        <?php $_smarty_tpl->tpl_vars["alert_title"] = new Smarty_variable("Обнаружены системные ошибки", null, 0);?>
    <?php } else { ?>
        <?php $_smarty_tpl->tpl_vars["alert_type"] = new Smarty_variable("info", null, 0);?>
        <?php $_smarty_tpl->tpl_vars["alert_title"] = new Smarty_variable("Информация", null, 0);?>
    <?php }?>

    <div class="alert alert-<?php echo $_smarty_tpl->tpl_vars['alert_type']->value;?>
 <?php if ($_smarty_tpl->getVariable('smarty')->value['foreach']['alert_types']['last']) {?>clamped-margin-bottom<?php }?>">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        

        <?php $_smarty_tpl->tpl_vars["alerts_buffer"] = new Smarty_variable('', null, 0);?>
        <?php  $_smarty_tpl->tpl_vars['alert'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['alert']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['alerts']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
 $_smarty_tpl->tpl_vars['alert']->total= $_smarty_tpl->_count($_from);
 $_smarty_tpl->tpl_vars['alert']->iteration=0;
 $_smarty_tpl->tpl_vars['alert']->index=-1;
foreach ($_from as $_smarty_tpl->tpl_vars['alert']->key => $_smarty_tpl->tpl_vars['alert']->value) {
$_smarty_tpl->tpl_vars['alert']->_loop = true;
 $_smarty_tpl->tpl_vars['alert']->iteration++;
 $_smarty_tpl->tpl_vars['alert']->index++;
 $_smarty_tpl->tpl_vars['alert']->first = $_smarty_tpl->tpl_vars['alert']->index === 0;
 $_smarty_tpl->tpl_vars['alert']->last = $_smarty_tpl->tpl_vars['alert']->iteration === $_smarty_tpl->tpl_vars['alert']->total;
 $_smarty_tpl->tpl_vars['smarty']->value['foreach']['alerts']['first'] = $_smarty_tpl->tpl_vars['alert']->first;
 $_smarty_tpl->tpl_vars['smarty']->value['foreach']['alerts']['last'] = $_smarty_tpl->tpl_vars['alert']->last;
?>
            <?php if ($_smarty_tpl->getVariable('smarty')->value['foreach']['alerts']['first']) {?>
                <small><?php echo smarty_modifier_date_format($_smarty_tpl->tpl_vars['alert']->value['time'],'%D %H:%M:%S');?>
</small>
            <?php }?>

            <?php if ($_smarty_tpl->tpl_vars['type']->value==@constant('ALERT_DANGER')) {?>
                <?php $_smarty_tpl->tpl_vars["alerts_buffer"] = new Smarty_variable(($_smarty_tpl->tpl_vars['alerts_buffer']->value).($_smarty_tpl->tpl_vars['alert']->value['message']), null, 0);?>
                <?php if (!$_smarty_tpl->getVariable('smarty')->value['foreach']['alerts']['last']) {?>
                    <?php $_smarty_tpl->tpl_vars["alerts_buffer"] = new Smarty_variable(((($_smarty_tpl->tpl_vars['alerts_buffer']->value).(@constant('PHP_EOL'))).("---")).(@constant('PHP_EOL')), null, 0);?>
                <?php }?>
            <?php } else { ?>
                <p><?php echo $_smarty_tpl->tpl_vars['alert']->value['message'];?>
</p>
            <?php }?>
        <?php } ?>

        <?php if ($_smarty_tpl->tpl_vars['type']->value==@constant('ALERT_DANGER')) {?>
            <textarea rows="3" class="form-control form-base64"><?php if ($_smarty_tpl->tpl_vars['config']->value->dev_mode) {
echo $_smarty_tpl->tpl_vars['alerts_buffer']->value;
} else {
echo base64_encode($_smarty_tpl->tpl_vars['alerts_buffer']->value);
}?></textarea>
            <p>Пожалуйста, отправте этот код по адресу службы поддержки: <a href="mailto:<?php echo @constant('IW_EMAIL_SUPPORT');?>
"><?php echo @constant('IW_EMAIL_SUPPORT');?>
</a></p>
        <?php }?>

    </div>
<?php } ?>

<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\wrap.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4316dbca41_23093981')) {function content_5c5a4316dbca41_23093981($_smarty_tpl) {?><?php if (!is_callable('smarty_modifier_ts2text')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.ts2text.php';
if (!is_callable('smarty_modifier_mb_ucfirst')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.mb_ucfirst.php';
?>
<div class="container-fluid animated fadeInDown">
    <div class="row">
        <div class="col-md-3">
            <span class="label label-tag">
            <i class="fa fa-plus fa-fw text-muted"></i> <span class="hidden-xs">Создана: </span><?php echo smarty_modifier_ts2text($_smarty_tpl->tpl_vars['demand_data']->value['unix_create_date']);?>

                </span>
        </div>
        <div class="col-md-3 text-center">
            <span class="label label-tag">
            <i class="fa fa-user text-muted"></i> <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['cu_id']) {
echo $_smarty_tpl->tpl_vars['demand_data']->value['cu_short_fio'];
} elseif ($_smarty_tpl->tpl_vars['demand_data']->value['cu_eid']) {
echo $_smarty_tpl->tpl_vars['demand_data']->value['cu_email'];
} else { ?><span class="text-muted"><?php echo smarty_modifier_mb_ucfirst(L::text_unknown);?>
</span><?php }?>
                </span>
        </div>
        <div class="col-md-3 text-center">
            <span class="label label-tag">
                <i class="fa fa-pencil fa-fw text-muted"></i> <span class="hidden-xs">Изменена: </span><?php if ($_smarty_tpl->tpl_vars['demand_data']->value['unix_activity_date']) {
echo smarty_modifier_ts2text($_smarty_tpl->tpl_vars['demand_data']->value['unix_activity_date']);
} else { ?><span class="text-muted"><?php echo smarty_modifier_mb_ucfirst(L::text_unknown);?>
</span><?php }?>
            </span>
        </div>
        <div class="col-md-3 text-right">
            <span class="label label-tag">
            <i class="fa fa-user text-muted"></i> <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['activity_eid']) {
echo $_smarty_tpl->tpl_vars['demand_data']->value['activity_user_short_fio'];
} else { ?><span class="text-muted"><?php echo smarty_modifier_mb_ucfirst(L::text_unknown);?>
</span><?php }?>
                </span>
        </div>
    </div>
    <div class="space space-xs"></div>

    <div class="well well-sm bg-white demand-block" >
    <?php /*  Call merged included template "demands/view/block_demand.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/block_demand.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4316e12957_05461700($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/block_demand.tpl" */?>
    </div>
</div>

<div class="clearfix"></div>
<div class="space"></div>

<div class="container-fluid">
    <ul class="nav nav-tabs clamped" id="demand-tabs">
        <li class="active"><a href="#demand-messages" data-toggle="tab"><i class="fa fa-comments-o"></i> <?php echo L::tabs_messages;?>
</a></li>
        <li><a href="#demand-checklist" data-toggle="tab"><i class="fa fa-fw fa-check"></i> Чек-лист <?php if ($_smarty_tpl->tpl_vars['ar_todo']->value['total']) {?><span class="badge badge-info"><?php echo $_smarty_tpl->tpl_vars['ar_todo']->value['complete'];?>
/<?php echo $_smarty_tpl->tpl_vars['ar_todo']->value['total'];?>
</span><?php }?></a></li>
        <li><a href="#demand-members" data-remote="demands/view/<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['id'];?>
/get_members/" data-toggle="tab"><i class="fa fa-fw fa-users"></i> <?php echo L::tabs_members;?>
</a></li>
        <?php if ($_smarty_tpl->tpl_vars['branch_size']->value>1) {?>
        <li><a href="#demand-branch"  data-toggle="tab"><i class="fa fa-fw fa-object-group"></i> <?php echo L::tabs_joins;?>
 <span class="badge badge-info"><?php echo $_smarty_tpl->tpl_vars['branch_complete']->value;?>
/<?php echo $_smarty_tpl->tpl_vars['branch_size']->value;?>
</span></a></li>
        <?php }?>

        <li><a href="#demand-history" data-remote="demands/view/<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['id'];?>
/get_history/" data-toggle="tab"><i class="fa fa-fw fa-history"></i> <?php echo L::tabs_history;?>
</a></li>

    </ul>

    <div class="tab-content">
        <div class="tab-pane active clamped" id="demand-messages">
            <?php /*  Call merged included template "demands/view/block_messages.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/block_messages.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4317243329_06290073($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/block_messages.tpl" */?>
        </div>
        <div class="tab-pane container-fluid bg-white" id="demand-checklist">
            <?php /*  Call merged included template "demands/view/block_checklist.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/block_checklist.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a43173e9189_74339472($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/block_checklist.tpl" */?>
        </div>
        <div class="tab-pane container-fluid bg-white" id="demand-members">
        </div>
        <?php if ($_smarty_tpl->tpl_vars['branch_size']->value>1) {?>
        <div class="tab-pane clamped-margin-bottom clamped-padding-bottom container-fluid bg-white" id="demand-branch">
            <?php /*  Call merged included template "demands/view/branch/wrap.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/branch/wrap.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a431744ac23_73752569($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/branch/wrap.tpl" */?>
        </div>
        <?php }?>
        <div class="tab-pane container-fluid bg-white" id="demand-history">
        </div>

    </div>

</div>

<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\block_demand.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4316e12957_05461700')) {function content_5c5a4316e12957_05461700($_smarty_tpl) {?><?php if (!is_callable('smarty_modifier_mb_ucfirst')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.mb_ucfirst.php';
if (!is_callable('smarty_modifier_ts2hours')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.ts2hours.php';
if (!is_callable('smarty_modifier_ts2text')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.ts2text.php';
?><div class="form-horizontal  ">
    <div class="row">
        <div class="col-sm-12">
            <div class="form-group clamped-margin-bottom">
                
                <label class="col-sm-2 col-xs-3 control-label">Тип</label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static">
                        <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['type_name']) {?><label class="label label-<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['type_type'];?>
"><?php echo $_smarty_tpl->tpl_vars['demand_data']->value['type_name'];?>
</label><?php } else { ?><span class="label label-disable"><?php echo smarty_modifier_mb_ucfirst(L::text_unknown);?>
</span><?php }?>
                        <span class="hidden-xs">
                        <?php /*  Call merged included template "helpers/forms/demand_status.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/forms/demand_status.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('value'=>$_smarty_tpl->tpl_vars['demand_data']->value['status'],'read'=>true), 0, '54125c5a431678e850-85303670');
content_5c5a4316e2dee8_08983842($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/forms/demand_status.tpl" */?>
                        </span>
                    </p>
                </div>
                
                <div class="visible-xs">
                <label class="col-sm-2 col-xs-3 control-label"><?php echo L::forms_labels_demands_status;?>
</label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static"><?php /*  Call merged included template "helpers/forms/demand_status.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/forms/demand_status.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('value'=>$_smarty_tpl->tpl_vars['demand_data']->value['status'],'read'=>true), 0, '54125c5a431678e850-85303670');
content_5c5a4316e2dee8_08983842($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/forms/demand_status.tpl" */?></p>
                </div>
                </div>
                
                <label class="col-sm-2 col-xs-3 control-label"><?php echo L::forms_labels_demands_priority;?>
</label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static"><?php /*  Call merged included template "helpers/forms/demand_priority.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/forms/demand_priority.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('value'=>$_smarty_tpl->tpl_vars['demand_data']->value['priority'],'read'=>true), 0, '54125c5a431678e850-85303670');
content_5c5a4316ed9d01_31621061($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/forms/demand_priority.tpl" */?></p>
                </div>
                
                <label class="col-sm-2 col-xs-3 control-label"><?php echo L::forms_labels_demands_criticality;?>
</label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static"><?php /*  Call merged included template "helpers/forms/demand_criticality.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/forms/demand_criticality.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('value'=>$_smarty_tpl->tpl_vars['demand_data']->value['criticality'],'read'=>true), 0, '54125c5a431678e850-85303670');
content_5c5a431705ae36_25229348($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/forms/demand_criticality.tpl" */?></p>
                </div>

                
                <label class="col-sm-2 col-xs-3 control-label"><?php echo L::forms_labels_demands_time_in_work;?>
<span class="hidden-sm hidden-xs"></span></label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static text-ellipsis">
                        <?php echo smarty_modifier_ts2hours($_smarty_tpl->tpl_vars['demand_data']->value['exec_time']);?>

                    </p>
                </div>


                
                <label class="col-sm-2 col-xs-3 control-label"><?php echo L::forms_labels_demands_required_time;?>
<span class="hidden-sm hidden-xs"></span></label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static">
                        <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['required_time']) {?>
                            <?php echo smarty_modifier_ts2hours($_smarty_tpl->tpl_vars['demand_data']->value['required_time']);?>

                        <?php } else { ?>
                            <span class="text-muted"><?php echo L::text_not_specified;?>
</span>
                        <?php }?>
                    </p>
                </div>

                <div class="clearfix visible-xs"></div>

                <label class="col-sm-2 col-xs-3 control-label"><?php echo L::forms_labels_demands_implement_percent;?>
</label>
                <div class="col-sm-2 col-xs-3">
                    <div class="form-control-static">
                        <div class="progress progress-striped <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['status']==m_demands::STATUS_WORK) {?>active<?php }?> clamped">
                            <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['percent_complete']<=100) {?>
                                <div class="progress-bar progress-bar-success" aria-valuenow="<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['percent_complete'];?>
" style="width: <?php echo $_smarty_tpl->tpl_vars['demand_data']->value['percent_complete'];?>
%">
                                    <?php echo $_smarty_tpl->tpl_vars['demand_data']->value['percent_complete'];?>
%
                                </div>
                            <?php } else { ?>
                                <div class="progress-bar progress-bar-success" aria-valuenow="<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['percent_complete'];?>
" style="width: <?php ob_start();?><?php echo $_smarty_tpl->tpl_vars['demand_data']->value['percent_complete'];?>
<?php $_tmp1=ob_get_clean();?><?php echo ceil(100/$_tmp1*100);?>
%">
                                    100%
                                </div>

                                <div class="progress-bar progress-bar-danger" aria-valuenow="<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['percent_complete'];?>
" style="width: <?php ob_start();?><?php echo $_smarty_tpl->tpl_vars['demand_data']->value['percent_complete'];?>
<?php $_tmp2=ob_get_clean();?><?php echo (100-ceil(100/$_tmp2*100));?>
%">
                                    <?php echo $_smarty_tpl->tpl_vars['demand_data']->value['percent_complete_over'];?>
%
                                </div>
                            <?php }?>
                        </div>
                        
                    </div>
                </div>


                
                
            </div>
        </div>
    </div>
</div>

<div class="clearfix"></div>

<div class="form-horizontal  ">
    
    <div class="row">
        <div class="col-sm-12">
            <div class="form-group demand-details <?php if (!$_smarty_tpl->tpl_vars['detail']->value) {?>hidden<?php }?>">
                
                <label class="col-sm-2 col-xs-3 control-label <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['active_role']==@constant('USER_ROLE_CUSTOMER')) {?>text-bold<?php }?>"><?php echo L::members_customer;?>
</label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static text-ellipsis">
                        <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['cu_id']) {?>
                            <a data-toggle="modal" href="#modal-remote" data-remote="users/view/<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['cu_id'];?>
/">
                                <?php echo $_smarty_tpl->tpl_vars['demand_data']->value['cu_fi'];?>

                            </a>
                        <?php } else { ?>
                            <?php echo $_smarty_tpl->tpl_vars['demand_data']->value['cu_email'];?>

                        <?php }?>
                    </p>
                </div>
                
                <label class="col-sm-2 col-xs-3 control-label <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['active_role']==@constant('USER_ROLE_EXECUTOR')) {?>text-bold<?php }?>"><?php echo L::members_executor;?>
</label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static text-ellipsis">
                        <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['eu_id']) {?>
                            <a data-toggle="modal" href="#modal-remote" data-remote="users/view/<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['eu_id'];?>
/">
                                <?php echo $_smarty_tpl->tpl_vars['demand_data']->value['eu_fi'];?>

                            </a>
                        <?php } else { ?>
                            <span class="text-muted"><?php echo smarty_modifier_mb_ucfirst(L::text_unknown);?>
</span>
                        <?php }?>
                    </p>
                </div>

                <div class="clearfix visible-xs"></div>

                
                <label class="col-sm-2 col-xs-3 control-label <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['active_role']==@constant('USER_ROLE_RESPONSIBLE')) {?>text-bold<?php }?>"><?php echo L::members_responsible;?>
</label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static text-ellipsis">
                        <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['ru_id']) {?>
                            <a data-toggle="modal" href="#modal-remote" data-remote="users/view/<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['ru_id'];?>
/">
                                <?php echo $_smarty_tpl->tpl_vars['demand_data']->value['ru_fi'];?>

                            </a>
                        <?php } else { ?>
                            <span class="text-muted"><?php echo smarty_modifier_mb_ucfirst(L::text_unknown);?>
</span>
                        <?php }?>
                    </p>
                </div>
                
                <label class="col-sm-2 col-xs-3 control-label"><?php echo smarty_modifier_mb_ucfirst(L::modules_contacts_morph_one);?>
</label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static text-ellipsis">
                        <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['contact_id']) {?>
                            <a data-toggle="modal" href="#modal-remote" data-remote="contacts/view/<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['contact_id'];?>
/">
                                <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['contact_legal']==@constant('NATURAL_PERSON')) {?>
                                    <?php echo $_smarty_tpl->tpl_vars['demand_data']->value['contact_face_short_fio'];?>

                                <?php } else { ?>
                                    <?php echo $_smarty_tpl->tpl_vars['demand_data']->value['contact_company_full_name'];?>

                                <?php }?>
                            </a>
                        <?php } else { ?>
                            <span class="text-muted"><?php echo smarty_modifier_mb_ucfirst(L::text_unknown);?>
</span>
                        <?php }?>
                    </p>
                </div>

                <div class="clearfix visible-xs"></div>

                
                <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['unix_deadline_date']) {?>
                    <label class="col-sm-2 col-xs-3 control-label">Дедлай</label>
                    <div class="col-sm-2 col-xs-3">
                        <p class="form-control-static">
                            <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['unix_deadline_date']<time()) {?><i class="fa fa-warning text-warning"></i> <?php }?> <?php echo smarty_modifier_ts2text($_smarty_tpl->tpl_vars['demand_data']->value['unix_deadline_date'],false,false,false);?>

                        </p>
                    </div>
                <?php }?>

                
                
                <label class="col-sm-2 col-xs-3 control-label">Стоимость<span class="hidden-sm hidden-xs"></span></label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static">
                        <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['exec_price']) {?>
                            <?php echo number_format($_smarty_tpl->tpl_vars['demand_data']->value['exec_price'],1);?>

                        <?php } else { ?>
                            <span class="text-muted">&mdash;</span>
                        <?php }?>
                    </p>
                </div>
                

                
                <label class="col-sm-2 col-xs-3 control-label"><?php echo smarty_modifier_mb_ucfirst(L::modules_projects_morph_one);?>
</label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static text-ellipsis">
                        <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['project_id']) {?>
                            <a href="demands/?cnd[project_id]=<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['project_id'];?>
"><?php echo $_smarty_tpl->tpl_vars['demand_data']->value['project_name'];?>
</a>
                        <?php } else { ?>
                            <span class="text-muted"><?php echo smarty_modifier_mb_ucfirst(L::text_unknown);?>
</span>
                        <?php }?>
                    </p>
                </div>

                
                <label class="col-sm-2 col-xs-3 control-label">Версия</label>
                <div class="col-sm-2 col-xs-3">
                    <p class="form-control-static text-ellipsis">
                        <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['ar_versions']) {?>
                            <?php  $_smarty_tpl->tpl_vars['version'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['version']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['demand_data']->value['ar_versions']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
 $_smarty_tpl->tpl_vars['version']->total= $_smarty_tpl->_count($_from);
 $_smarty_tpl->tpl_vars['version']->iteration=0;
foreach ($_from as $_smarty_tpl->tpl_vars['version']->key => $_smarty_tpl->tpl_vars['version']->value) {
$_smarty_tpl->tpl_vars['version']->_loop = true;
 $_smarty_tpl->tpl_vars['version']->iteration++;
 $_smarty_tpl->tpl_vars['version']->last = $_smarty_tpl->tpl_vars['version']->iteration === $_smarty_tpl->tpl_vars['version']->total;
?>
                                <a href="demands/?cnd[project_id]=<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['project_id'];?>
&cnd[version_id]=<?php echo $_smarty_tpl->tpl_vars['version']->value['id'];?>
"><?php echo $_smarty_tpl->tpl_vars['version']->value['name'];?>
</a><?php if (!$_smarty_tpl->tpl_vars['version']->last) {?>,<?php }?>
                            <?php } ?>
                        <?php } else { ?>
                            <span class="text-muted"><?php echo smarty_modifier_mb_ucfirst(L::text_unknown);?>
</span>
                        <?php }?>
                    </p>
                </div>

            </div>
        </div>
    </div>

    <?php if (!$_smarty_tpl->tpl_vars['detail']->value) {?>
    <div class="row ">
        <div class="col-sm-12 text-center">
            <button class="btn btn-link btn-sm" onclick="$(this).closest('.form-horizontal').find('.demand-details').toggleClass('hidden'); $(this).closest('.row').remove(); return false;">Показать детали</button>
        </div>
    </div>
    <?php }?>



</div><?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\helpers\forms\demand_status.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4316e2dee8_08983842')) {function content_5c5a4316e2dee8_08983842($_smarty_tpl) {?><?php if ($_smarty_tpl->tpl_vars['read']->value) {?>
    
    
    <?php if ($_smarty_tpl->tpl_vars['clear']->value) {?>
        <?php echo m_demands::$ar_status[$_smarty_tpl->tpl_vars['value']->value]['name'];?>

    <?php } else { ?>
        <span class="label label-<?php if ($_smarty_tpl->tpl_vars['monochrome']->value) {?>tag<?php } else {
echo m_demands::$ar_status[$_smarty_tpl->tpl_vars['value']->value]['color'];
}?>"><i class="fa fa-<?php echo m_demands::$ar_status[$_smarty_tpl->tpl_vars['value']->value]['icon'];?>
"></i>&nbsp;<?php echo m_demands::$ar_status[$_smarty_tpl->tpl_vars['value']->value]['name'];?>
</span>
    <?php }?>

<?php } else { ?>
    <?php  $_smarty_tpl->tpl_vars['status'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['status']->_loop = false;
 $_smarty_tpl->tpl_vars['status_id'] = new Smarty_Variable;
 $_from = m_demands::$ar_status; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['status']->key => $_smarty_tpl->tpl_vars['status']->value) {
$_smarty_tpl->tpl_vars['status']->_loop = true;
 $_smarty_tpl->tpl_vars['status_id']->value = $_smarty_tpl->tpl_vars['status']->key;
?>
        <option <?php if ($_smarty_tpl->tpl_vars['only']->value&&((is_array($_smarty_tpl->tpl_vars['only']->value)&&!in_array($_smarty_tpl->tpl_vars['status_id']->value,$_smarty_tpl->tpl_vars['only']->value))||(!is_array($_smarty_tpl->tpl_vars['only']->value)&&$_smarty_tpl->tpl_vars['only']->value!=$_smarty_tpl->tpl_vars['status_id']->value))) {?>disabled<?php }?> data-icon="text-<?php echo $_smarty_tpl->tpl_vars['status']->value['color'];?>
 fa-<?php echo $_smarty_tpl->tpl_vars['status']->value['icon'];?>
 fa-fw" <?php if ((is_array($_smarty_tpl->tpl_vars['value']->value)&&in_array($_smarty_tpl->tpl_vars['status_id']->value,$_smarty_tpl->tpl_vars['value']->value))||$_smarty_tpl->tpl_vars['value']->value==$_smarty_tpl->tpl_vars['status_id']->value) {?>selected=""<?php }?> value="<?php echo $_smarty_tpl->tpl_vars['status_id']->value;?>
"><?php echo $_smarty_tpl->tpl_vars['status']->value['name'];?>
</option>
    <?php } ?>
<?php }?><?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:46
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\helpers\forms\demand_priority.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4316ed9d01_31621061')) {function content_5c5a4316ed9d01_31621061($_smarty_tpl) {?>
<?php if ($_smarty_tpl->tpl_vars['read']->value) {?>
    <?php if ($_smarty_tpl->tpl_vars['clear']->value) {?>
        <?php echo m_demands::decode_priority($_smarty_tpl->tpl_vars['value']->value);?>
 (<?php echo $_smarty_tpl->tpl_vars['value']->value;?>
)
    <?php } else { ?>
        <span class="label label-success"><?php echo m_demands::decode_priority($_smarty_tpl->tpl_vars['value']->value);?>
 (<?php echo $_smarty_tpl->tpl_vars['value']->value;?>
)</span>
    <?php }?>

<?php } elseif ($_smarty_tpl->tpl_vars['options']->value) {?>
    <option <?php if ($_smarty_tpl->tpl_vars['only']->value&&((is_array($_smarty_tpl->tpl_vars['only']->value)&&!in_array(0,$_smarty_tpl->tpl_vars['only']->value))||(!is_array($_smarty_tpl->tpl_vars['only']->value)&&$_smarty_tpl->tpl_vars['only']->value!==0))) {?>disabled<?php }?> value="0" <?php if ((is_array($_smarty_tpl->tpl_vars['value']->value)&&in_array(0,$_smarty_tpl->tpl_vars['value']->value))||$_smarty_tpl->tpl_vars['value']->value===0) {?>selected=""<?php }?>><?php echo L::modules_demands_priority_low;?>
 (0-100)</option>
    <option <?php if ($_smarty_tpl->tpl_vars['only']->value&&((is_array($_smarty_tpl->tpl_vars['only']->value)&&!in_array(100,$_smarty_tpl->tpl_vars['only']->value))||(!is_array($_smarty_tpl->tpl_vars['only']->value)&&$_smarty_tpl->tpl_vars['only']->value!=100))) {?>disabled<?php }?> value="100" <?php if ((is_array($_smarty_tpl->tpl_vars['value']->value)&&in_array(100,$_smarty_tpl->tpl_vars['value']->value))||$_smarty_tpl->tpl_vars['value']->value>100&&$_smarty_tpl->tpl_vars['value']->value<=200) {?>selected=""<?php }?>><?php echo L::modules_demands_priority_mid;?>
 (100-200)</option>
    <option <?php if ($_smarty_tpl->tpl_vars['only']->value&&((is_array($_smarty_tpl->tpl_vars['only']->value)&&!in_array(200,$_smarty_tpl->tpl_vars['only']->value))||(!is_array($_smarty_tpl->tpl_vars['only']->value)&&$_smarty_tpl->tpl_vars['only']->value!=200))) {?>disabled<?php }?> value="200" <?php if ((is_array($_smarty_tpl->tpl_vars['value']->value)&&in_array(200,$_smarty_tpl->tpl_vars['value']->value))||$_smarty_tpl->tpl_vars['value']->value>200&&$_smarty_tpl->tpl_vars['value']->value<=300) {?>selected=""<?php }?>><?php echo L::modules_demands_priority_hi;?>
 (200-300)</option>
<?php } else { ?>

    <input name="demand_data[priority]" id="demand_data_priority" value="<?php echo $_smarty_tpl->tpl_vars['value']->value;?>
" />

    <?php echo '<script'; ?>
>
        $().ready( function() {
            $("#demand_data_priority").ionRangeSlider({
                min: 1,
                max: 300,
                from: 100,
                grid: false,
                force_edges: true,

                prettify: function (num) {
                    var level = '';
                    if (num >= 200) {
                        level = '<?php echo L::modules_demands_priority_hi;?>
';
                    } else if (num >= 100) {
                        level = '<?php echo L::modules_demands_priority_mid;?>
';
                    } else {
                        level = '<?php echo L::modules_demands_priority_low;?>
';
                    }

                    return level + ' (' + num + ')';
                }
            });
        });
    <?php echo '</script'; ?>
>
<?php }?>

<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\helpers\forms\demand_criticality.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a431705ae36_25229348')) {function content_5c5a431705ae36_25229348($_smarty_tpl) {?><?php if ($_smarty_tpl->tpl_vars['read']->value) {?>
    <?php if ($_smarty_tpl->tpl_vars['clear']->value) {?>
        <?php echo m_demands::$ar_criticality[$_smarty_tpl->tpl_vars['read']->value]['name'];?>

    <?php } else { ?>
        <span class="label label-<?php echo m_demands::$ar_criticality[$_smarty_tpl->tpl_vars['value']->value]['color'];?>
">
            <i class="fa fa-<?php echo m_demands::$ar_criticality[$_smarty_tpl->tpl_vars['value']->value]['icon'];?>
" title="<?php echo m_demands::$ar_criticality[$_smarty_tpl->tpl_vars['value']->value]['name'];?>
"></i> <?php echo m_demands::$ar_criticality[$_smarty_tpl->tpl_vars['value']->value]['name'];?>

        </span>
    <?php }?>
<?php } else { ?>
    <?php  $_smarty_tpl->tpl_vars['criticality'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['criticality']->_loop = false;
 $_smarty_tpl->tpl_vars['criticality_id'] = new Smarty_Variable;
 $_from = m_demands::$ar_criticality; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['criticality']->key => $_smarty_tpl->tpl_vars['criticality']->value) {
$_smarty_tpl->tpl_vars['criticality']->_loop = true;
 $_smarty_tpl->tpl_vars['criticality_id']->value = $_smarty_tpl->tpl_vars['criticality']->key;
?>
        <option <?php if ($_smarty_tpl->tpl_vars['only']->value&&((is_array($_smarty_tpl->tpl_vars['only']->value)&&!in_array($_smarty_tpl->tpl_vars['criticality_id']->value,$_smarty_tpl->tpl_vars['only']->value))||(!is_array($_smarty_tpl->tpl_vars['only']->value)&&$_smarty_tpl->tpl_vars['only']->value!=$_smarty_tpl->tpl_vars['criticality_id']->value))) {?>disabled<?php }?> <?php if ((is_array($_smarty_tpl->tpl_vars['value']->value)&&in_array($_smarty_tpl->tpl_vars['criticality_id']->value,$_smarty_tpl->tpl_vars['value']->value))||$_smarty_tpl->tpl_vars['value']->value==$_smarty_tpl->tpl_vars['criticality_id']->value) {?>selected=""<?php }?>  data-icon="text-<?php echo $_smarty_tpl->tpl_vars['criticality']->value['color'];?>
 fa-<?php echo $_smarty_tpl->tpl_vars['criticality']->value['icon'];?>
 fa-fw" value="<?php echo $_smarty_tpl->tpl_vars['criticality_id']->value;?>
"><?php echo $_smarty_tpl->tpl_vars['criticality']->value['name'];?>
</option>
    <?php } ?>
<?php }?>
<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\block_messages.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4317243329_06290073')) {function content_5c5a4317243329_06290073($_smarty_tpl) {?><?php /*  Call merged included template "demands/view/messages/list.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/messages/list.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('ar_messages'=>$_smarty_tpl->tpl_vars['ar_messages']->value), 0, '54125c5a431678e850-85303670');
content_5c5a431724eea6_03024862($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/messages/list.tpl" */?><?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\messages\list.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a431724eea6_03024862')) {function content_5c5a431724eea6_03024862($_smarty_tpl) {?><div id="messages-container">
    <?php if ($_smarty_tpl->tpl_vars['ar_messages']->value) {?>
        <?php  $_smarty_tpl->tpl_vars['message'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['message']->_loop = false;
 $_smarty_tpl->tpl_vars['message_id'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['ar_messages']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['message']->key => $_smarty_tpl->tpl_vars['message']->value) {
$_smarty_tpl->tpl_vars['message']->_loop = true;
 $_smarty_tpl->tpl_vars['message_id']->value = $_smarty_tpl->tpl_vars['message']->key;
?>
            <?php /*  Call merged included template "demands/view/messages/item.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/messages/item.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4317262732_14182483($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/messages/item.tpl" */?>
            
        <?php } ?>
    <?php } else { ?>
        <div class="alert alert-default">
            В заявке нет ни одного сообщения
        </div>
    <?php }?>
</div>

<?php echo '<script'; ?>
>
    $("#messages-container").delegate(".show-details", "click", function() {
        $(this).closest("table").find("tr.message-details").removeClass("hidden");
        $(this).closest("tr").remove();
        return false;
    }).delegate(".message-status", "ifToggled", function() {
        var message_id = $(this).val();
        var status = ($(this).is(":checked"))?1:0;
        DemandIW.change_message_status(message_id, status);
    });
<?php echo '</script'; ?>
><?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\messages\item.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4317262732_14182483')) {function content_5c5a4317262732_14182483($_smarty_tpl) {?><?php if (!is_callable('smarty_modifier_ts2text')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.ts2text.php';
if (!is_callable('smarty_modifier_filesize')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.filesize.php';
?><div class="container-fluid clamped-margin-bottom well well-sm <?php if ($_smarty_tpl->tpl_vars['message']->value['style']) {?>well-<?php echo $_smarty_tpl->tpl_vars['message']->value['style'];
} else { ?>bg-white<?php }?>">

    <div class="media">
        <div class="pull-left i-checks" style="padding-top:5px">
            <input type="checkbox" value="<?php echo $_smarty_tpl->tpl_vars['message']->value['id'];?>
" <?php if ($_smarty_tpl->tpl_vars['message']->value['status']) {?>checked=""<?php }?> class="message-status">
            
        </div>

        <?php if ($_smarty_tpl->tpl_vars['message']->value['user_from_id']) {?>
        <a data-toggle="modal" href="#modal-remote" data-remote="users/view/<?php echo $_smarty_tpl->tpl_vars['message']->value['user_from_id'];?>
/" class="pull-left">
            <?php /*  Call merged included template "helpers/avatar.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/avatar.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('hash'=>$_smarty_tpl->tpl_vars['message']->value['user_from_avatar_storage_hash'],'dir'=>@constant('STORAGE_DIR_AVATARS_USERS')), 0, '54125c5a431678e850-85303670');
content_5c5a431728d6b9_17586862($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/avatar.tpl" */?>
        </a>
        <?php } else { ?>
            <div class="pull-left">
            <?php /*  Call merged included template "helpers/avatar.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/avatar.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('hash'=>false,'dir'=>@constant('STORAGE_DIR_AVATARS_USERS')), 0, '54125c5a431678e850-85303670');
content_5c5a431728d6b9_17586862($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/avatar.tpl" */?>
            </div>
        <?php }?>
        <div class="media-body">
            <div class="media-heading">
                <table style="width:100%">
                    <colgroup>
                        <col width="50"/>
                        <col width="*"/>
                    </colgroup>
                    <tr>
                        <td>От:</td>
                        <td>
                            <div class="pull-left">
                                <?php if ($_smarty_tpl->tpl_vars['message']->value['user_from_id']) {?><a data-toggle="modal" href="#modal-remote" data-remote="users/view/<?php echo $_smarty_tpl->tpl_vars['message']->value['user_from_id'];?>
/"><?php echo $_smarty_tpl->tpl_vars['message']->value['user_from_fi'];?>
</a><?php } else {
echo $_smarty_tpl->tpl_vars['message']->value['user_from_email'];
}?>
                            </div>
                            <div class="pull-right <?php if (!$_smarty_tpl->tpl_vars['message']->value['first']) {?>text-muted<?php }?>">
                                <span class="label label-tag">
                                <i class="fa fa-clock-o"></i> <?php echo smarty_modifier_ts2text($_smarty_tpl->tpl_vars['message']->value['unix_create_date']);?>

                                    </span>
                            </div>
                        </td>
                    </tr>
                    <tr class="message-details ">
                        <td>Кому:</td>
                        <td>
                            <?php if ($_smarty_tpl->tpl_vars['message']->value['to_eid']) {?>
                                <?php if ($_smarty_tpl->tpl_vars['message']->value['user_to_id']) {?><a data-toggle="modal" href="#modal-remote" data-remote="users/view/<?php echo $_smarty_tpl->tpl_vars['message']->value['user_to_id'];?>
/"><?php echo $_smarty_tpl->tpl_vars['message']->value['user_to_fi'];?>
</a><?php } else {
echo $_smarty_tpl->tpl_vars['message']->value['user_to_email'];
}?>
                            <?php } else { ?>
                                <span class="text-muted">&mdash;</span>
                            <?php }?>
                            <?php if ($_smarty_tpl->tpl_vars['message']->value['ar_copies']) {?>
                                Копия:
                                <?php  $_smarty_tpl->tpl_vars['copy'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['copy']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['message']->value['ar_copies']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
 $_smarty_tpl->tpl_vars['copy']->total= $_smarty_tpl->_count($_from);
 $_smarty_tpl->tpl_vars['copy']->iteration=0;
foreach ($_from as $_smarty_tpl->tpl_vars['copy']->key => $_smarty_tpl->tpl_vars['copy']->value) {
$_smarty_tpl->tpl_vars['copy']->_loop = true;
 $_smarty_tpl->tpl_vars['copy']->iteration++;
 $_smarty_tpl->tpl_vars['copy']->last = $_smarty_tpl->tpl_vars['copy']->iteration === $_smarty_tpl->tpl_vars['copy']->total;
?>
                                    <?php if ($_smarty_tpl->tpl_vars['copy']->value['user_id']) {?><a data-toggle="modal" href="#modal-remote" data-remote="users/view/<?php echo $_smarty_tpl->tpl_vars['copy']->value['user_id'];?>
/"><?php echo $_smarty_tpl->tpl_vars['copy']->value['user_fi'];?>
</a><?php } else {
echo $_smarty_tpl->tpl_vars['copy']->value['user_email'];
}
if (!$_smarty_tpl->tpl_vars['copy']->last) {?>, <?php }?>
                                <?php } ?>
                            <?php }?>

                        </td>
                    </tr>
                    
                </table>
            </div>


            
            <div class="clearfix"></div>
        </div>
    </div>
</div>
<div class="container-fluid well well-sm bg-white" style="border-top:0">

    

    <?php if ($_smarty_tpl->tpl_vars['message']->value['ar_attach']) {?>
    <ul class="list-inline">
        <?php  $_smarty_tpl->tpl_vars['attach'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['attach']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['message']->value['ar_attach']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['attach']->key => $_smarty_tpl->tpl_vars['attach']->value) {
$_smarty_tpl->tpl_vars['attach']->_loop = true;
?>
            <li>
                <a target="_blank" class="label-group <?php if ((substr($_smarty_tpl->tpl_vars['attach']->value['mimetype'],0,5))=="image") {?>fancybox<?php }?>" rel="attach-<?php echo $_smarty_tpl->tpl_vars['message']->value['id'];?>
" href="<?php /*  Call merged included template "helpers/storage_url.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/storage_url.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('hash'=>$_smarty_tpl->tpl_vars['attach']->value['hash'],'dir'=>@constant('STORAGE_DIR_DEMANDS'),'name'=>$_smarty_tpl->tpl_vars['attach']->value['name'],'ext'=>$_smarty_tpl->tpl_vars['attach']->value['ext']), 0, '54125c5a431678e850-85303670');
content_5c5a43172c41c0_35911266($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/storage_url.tpl" */?>">
                   <span class="label label-tag"><i class="fa fa-files-o"></i> <?php echo $_smarty_tpl->tpl_vars['attach']->value['name'];?>
.<?php echo $_smarty_tpl->tpl_vars['attach']->value['ext'];?>
</span><span class="label label-default">(<?php echo smarty_modifier_filesize($_smarty_tpl->tpl_vars['attach']->value['size']);?>
)</span>
                </a>
            </li>
        <?php } ?>
        </ul>
    <?php }?>

    <div style="overflow-x: auto">
        <?php if ($_smarty_tpl->tpl_vars['message']->value['message']) {?>
            <?php echo $_smarty_tpl->tpl_vars['message']->value['message'];?>

        <?php } else { ?>
            <p class="text-muted">
                Пустое сообщение
            </p>
        <?php }?>
    </div>
</div>


<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\helpers\avatar.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a431728d6b9_17586862')) {function content_5c5a431728d6b9_17586862($_smarty_tpl) {?><?php if (!$_smarty_tpl->tpl_vars['size']->value) {?>
    <?php $_smarty_tpl->tpl_vars["size"] = new Smarty_variable("xs", null, 0);?>
<?php }?>

<?php if ($_smarty_tpl->tpl_vars['size']->value=="xs") {?>
    <?php $_smarty_tpl->tpl_vars["size_px"] = new Smarty_variable("32px", null, 0);?>
<?php } elseif ($_smarty_tpl->tpl_vars['size']->value=="sm") {?>
    <?php $_smarty_tpl->tpl_vars["size_px"] = new Smarty_variable("128px", null, 0);?>
<?php } else { ?>
    <?php $_smarty_tpl->tpl_vars["size_px"] = new Smarty_variable("256px", null, 0);?>
<?php }?>


<?php if ($_smarty_tpl->tpl_vars['hash']->value) {?>
    <img width="<?php echo $_smarty_tpl->tpl_vars['size_px']->value;?>
" src="<?php /*  Call merged included template "helpers/storage_url.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/storage_url.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('hash'=>$_smarty_tpl->tpl_vars['hash']->value,'dir'=>$_smarty_tpl->tpl_vars['dir']->value,'ext'=>"jpg",'thumb'=>$_smarty_tpl->tpl_vars['size']->value), 0, '54125c5a431678e850-85303670');
content_5c5a43172c41c0_35911266($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/storage_url.tpl" */?>" alt="Avatar" class="img-avatar img-circle<?php if ($_smarty_tpl->tpl_vars['responsive']->value) {?> img-responsive<?php }?>" <?php if ($_smarty_tpl->tpl_vars['id']->value) {?>data-user-id="<?php echo $_smarty_tpl->tpl_vars['id']->value;?>
"<?php }?>>
<?php } else { ?>
    <img width="<?php echo $_smarty_tpl->tpl_vars['size_px']->value;?>
" src="<?php echo @constant('STORAGE_DIR');
echo $_smarty_tpl->tpl_vars['dir']->value;?>
default_<?php echo $_smarty_tpl->tpl_vars['size']->value;?>
.jpg" alt="Avatar" class="img-avatar img-circle <?php if ($_smarty_tpl->tpl_vars['responsive']->value) {?> img-responsive<?php }?>" <?php if ($_smarty_tpl->tpl_vars['id']->value) {?>data-user-id="<?php echo $_smarty_tpl->tpl_vars['id']->value;?>
"<?php }?>>
<?php }?>
<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\helpers\storage_url.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a43172c41c0_35911266')) {function content_5c5a43172c41c0_35911266($_smarty_tpl) {?><?php if (!is_callable('smarty_modifier_storage_path')) include 'W:\\home\\intrawork.loc\\app\\classes\\smarty\\plugins\\modifier.storage_path.php';
?><?php echo smarty_modifier_storage_path($_smarty_tpl->tpl_vars['hash']->value,$_smarty_tpl->tpl_vars['dir']->value);
if ($_smarty_tpl->tpl_vars['thumb']->value) {?>thumbs/<?php echo $_smarty_tpl->tpl_vars['hash']->value;?>
_<?php echo $_smarty_tpl->tpl_vars['thumb']->value;
} else {
echo $_smarty_tpl->tpl_vars['hash']->value;
if ($_smarty_tpl->tpl_vars['name']->value) {?>/<?php echo $_smarty_tpl->tpl_vars['name']->value;
}
}?>.<?php if ($_smarty_tpl->tpl_vars['thumb']->value) {?>jpg<?php } else {
echo $_smarty_tpl->tpl_vars['ext']->value;
}?><?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\block_checklist.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a43173e9189_74339472')) {function content_5c5a43173e9189_74339472($_smarty_tpl) {?><?php /*  Call merged included template "todo/wrap.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("todo/wrap.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('demand_id'=>$_smarty_tpl->tpl_vars['demand_data']->value['id']), 0, '54125c5a431678e850-85303670');
content_5c5a43173f0e84_10742334($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "todo/wrap.tpl" */?><?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\todo\wrap.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a43173f0e84_10742334')) {function content_5c5a43173f0e84_10742334($_smarty_tpl) {?><link rel="stylesheet" href="resources/js/jquery/plugin/todolist/jquery.todolist.css" />
<?php echo '<script'; ?>
 type="text/javascript" src="resources/js/jquery/plugin/todolist/jquery.todolist.js"><?php echo '</script'; ?>
>

<?php /*  Call merged included template "./form/form.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("./form/form.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a43173f4d04_24020041($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "./form/form.tpl" */?>
<div class="space"></div>
<?php /*  Call merged included template "./list.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("./list.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a43173fca17_57969368($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "./list.tpl" */?>

<?php echo '<script'; ?>
>
    $(document).ready(function() {
        TodoListIW.init(<?php echo (($tmp = @$_smarty_tpl->tpl_vars['demand_id']->value)===null||$tmp==='' ? 0 : $tmp);?>
, <?php if ($_smarty_tpl->tpl_vars['lazy_writing']->value) {?>true<?php } else { ?>false<?php }?>);
    });
<?php echo '</script'; ?>
><?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\todo\form\form.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a43173f4d04_24020041')) {function content_5c5a43173f4d04_24020041($_smarty_tpl) {?><p>Добавляйте пункты с помощью кнопки «Добавить» или просто нажимая клавишу Enter.</p>

<div id="todo-list-form" class="input-group">
    <input type="text" class="form-control" placeholder="Название пункта чек-листа...">
    <span class="input-group-btn">
        <button class="btn btn-default" type="button">Добавить</button>
    </span>
</div>
<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\todo\list.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a43173fca17_57969368')) {function content_5c5a43173fca17_57969368($_smarty_tpl) {?><ul id="todo-list" class="ui-sortable">
    <?php  $_smarty_tpl->tpl_vars['todo'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['todo']->_loop = false;
 $_smarty_tpl->tpl_vars['todo_id'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['ar_todo']->value['data']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['todo']->key => $_smarty_tpl->tpl_vars['todo']->value) {
$_smarty_tpl->tpl_vars['todo']->_loop = true;
 $_smarty_tpl->tpl_vars['todo_id']->value = $_smarty_tpl->tpl_vars['todo']->key;
?>
        <li class="list-primary <?php if ($_smarty_tpl->tpl_vars['todo']->value['status']) {?>todo-done<?php }?>" data-id="<?php echo $_smarty_tpl->tpl_vars['todo_id']->value;?>
">
            <?php if (!$_smarty_tpl->tpl_vars['readonly']->value) {?>
                <i class=" fa fa-ellipsis-v"></i>
            <?php }?>
        <div class="todo-toggle i-checks">
            <input name="todo[<?php echo $_smarty_tpl->tpl_vars['todo_id']->value;?>
][status]" type="checkbox" <?php if ($_smarty_tpl->tpl_vars['todo']->value['status']) {?>checked=""<?php }?> value="1"/>
        </div>
        <div class="todo-title">
            <input name="todo[<?php echo $_smarty_tpl->tpl_vars['todo_id']->value;?>
][title]" type="hidden" value="<?php echo $_smarty_tpl->tpl_vars['todo']->value['title'];?>
"/>
            <span class="todo-title-sp"><?php echo $_smarty_tpl->tpl_vars['todo']->value['title'];?>
</span>
            <?php if (!$_smarty_tpl->tpl_vars['readonly']->value) {?>
            <div class="pull-right todo-actions">
                <div class="btn-group btn-group-sm">
                    <button class="btn btn-default btn-sm fa fa-pencil"></button>
                    <button class="btn btn-danger btn-sm fa fa-trash-o"></button>
                </div>
            </div>
        </div>
            <?php }?>
        </li>
    <?php } ?>
</ul><?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\branch\wrap.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a431744ac23_73752569')) {function content_5c5a431744ac23_73752569($_smarty_tpl) {?>

<link rel="stylesheet" href="resources/js/jquery/plugin/nestable/css/nestable.css">
<?php echo '<script'; ?>
 src="resources/js/jquery/plugin/nestable/js/jquery.nestable.js"><?php echo '</script'; ?>
>

<form class="form-horizontal">
    <div class="dd" id="branch-nestable">
        <?php /*  Call merged included template "demands/view/branch/nestable.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/branch/nestable.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('ar_tree'=>$_smarty_tpl->tpl_vars['ar_branch_tree']->value), 0, '54125c5a431678e850-85303670');
content_5c5a4317452922_61819467($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/branch/nestable.tpl" */?>
    </div>

    <div class="form-actions form-group">
        <div class="col-sm-12">
            <button class="btn btn-default" name="save" type="submit" id="update-order-branch">Сохранить порядок</button>
        </div>
    </div>
</form>




<?php echo '<script'; ?>
>
    $(document).ready(function(){
        $('#branch-nestable').nestable({
        }).on('change', function() {
            $("#demand-branch .form-actions .btn").removeClass("btn-default").addClass("btn-primary");
        });
    });

    $("#update-order-branch").on("click", function() {

        var json = $('#branch-nestable').nestable('serialize');
        var btn = $(this);

        
        $.ajax({
            method: 'post',
            url: 'demands/branch_update_orders/<?php echo $_smarty_tpl->tpl_vars['demand_data']->value['branch'];?>
/',
            data: {json: json},
            dataType: 'json',
            success: function(response) {
                toastr.success('<?php echo L::toastr_update_order_message;?>
', '<?php echo L::toastr_update_order_title;?>
');
                btn.button("reset");
                $("#demand-branch .form-actions .btn").removeClass("btn-primary").addClass("btn-default");
            }
        });
        

        return false;
    });

<?php echo '</script'; ?>
>
<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\branch\nestable.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4317452922_61819467')) {function content_5c5a4317452922_61819467($_smarty_tpl) {?><ol class="dd-list">
    <?php  $_smarty_tpl->tpl_vars['demand'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['demand']->_loop = false;
 $_smarty_tpl->tpl_vars['demand_id'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['ar_tree']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['demand']->key => $_smarty_tpl->tpl_vars['demand']->value) {
$_smarty_tpl->tpl_vars['demand']->_loop = true;
 $_smarty_tpl->tpl_vars['demand_id']->value = $_smarty_tpl->tpl_vars['demand']->key;
?>
        <li class="dd-item" data-id="<?php echo $_smarty_tpl->tpl_vars['demand_id']->value;?>
">
            <button class="btn btn-default btn-sm dd-handle"><i class="fa fa-arrows-alt"></i></button>
            <div data-id="<?php echo $_smarty_tpl->tpl_vars['demand_id']->value;?>
" class="dd-content c-hand <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['id']==$_smarty_tpl->tpl_vars['demand']->value['id']) {?>selected<?php }?>">
                <a href="demands/view/<?php echo $_smarty_tpl->tpl_vars['demand']->value['id'];?>
/" class="title pr-90 text-ellipsis">
                    
                    <?php echo $_smarty_tpl->tpl_vars['demand']->value['title'];?>

                </a>
                <div class="clearfix"></div>
            </div>
            <div class="dd-extra">
                <span class="pull-left">
                    <span class="btn btn-block">
                    <?php /*  Call merged included template "helpers/forms/demand_status.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/forms/demand_status.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('value'=>$_smarty_tpl->tpl_vars['demand']->value['status'],'read'=>true), 0, '54125c5a431678e850-85303670');
content_5c5a4316e2dee8_08983842($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/forms/demand_status.tpl" */?>
                    </span>
                </span>
                <span class="pull-left">
                    
                </span>
            </div>

            <?php if ($_smarty_tpl->tpl_vars['demand']->value['children']) {?>
                <?php /*  Call merged included template "./nestable.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("./nestable.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('nested'=>$_smarty_tpl->tpl_vars['nested']->value+1,'ar_tree'=>$_smarty_tpl->tpl_vars['demand']->value['children']), 0, '54125c5a431678e850-85303670');
content_5c5a4317491139_39317109($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "./nestable.tpl" */?>
            <?php }?>
        </li>
    <?php } ?>
</ol>
<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\branch\nestable.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4317491139_39317109')) {function content_5c5a4317491139_39317109($_smarty_tpl) {?><ol class="dd-list">
    <?php  $_smarty_tpl->tpl_vars['demand'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['demand']->_loop = false;
 $_smarty_tpl->tpl_vars['demand_id'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['ar_tree']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['demand']->key => $_smarty_tpl->tpl_vars['demand']->value) {
$_smarty_tpl->tpl_vars['demand']->_loop = true;
 $_smarty_tpl->tpl_vars['demand_id']->value = $_smarty_tpl->tpl_vars['demand']->key;
?>
        <li class="dd-item" data-id="<?php echo $_smarty_tpl->tpl_vars['demand_id']->value;?>
">
            <button class="btn btn-default btn-sm dd-handle"><i class="fa fa-arrows-alt"></i></button>
            <div data-id="<?php echo $_smarty_tpl->tpl_vars['demand_id']->value;?>
" class="dd-content c-hand <?php if ($_smarty_tpl->tpl_vars['demand_data']->value['id']==$_smarty_tpl->tpl_vars['demand']->value['id']) {?>selected<?php }?>">
                <a href="demands/view/<?php echo $_smarty_tpl->tpl_vars['demand']->value['id'];?>
/" class="title pr-90 text-ellipsis">
                    
                    <?php echo $_smarty_tpl->tpl_vars['demand']->value['title'];?>

                </a>
                <div class="clearfix"></div>
            </div>
            <div class="dd-extra">
                <span class="pull-left">
                    <span class="btn btn-block">
                    <?php /*  Call merged included template "helpers/forms/demand_status.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/forms/demand_status.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('value'=>$_smarty_tpl->tpl_vars['demand']->value['status'],'read'=>true), 0, '54125c5a431678e850-85303670');
content_5c5a4316e2dee8_08983842($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/forms/demand_status.tpl" */?>
                    </span>
                </span>
                <span class="pull-left">
                    
                </span>
            </div>

            <?php if ($_smarty_tpl->tpl_vars['demand']->value['children']) {?>
                <?php /*  Call merged included template "./nestable.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("./nestable.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array('nested'=>$_smarty_tpl->tpl_vars['nested']->value+1,'ar_tree'=>$_smarty_tpl->tpl_vars['demand']->value['children']), 0, '54125c5a431678e850-85303670');
content_5c5a4317491139_39317109($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "./nestable.tpl" */?>
            <?php }?>
        </li>
    <?php } ?>
</ol>
<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\message_form_pane.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4317506449_10961914')) {function content_5c5a4317506449_10961914($_smarty_tpl) {?><input type="hidden" name="message_data[demand_id]" value="<?php echo intval($_smarty_tpl->tpl_vars['demand_data']->value['id']);?>
" />

<div class="container-fluid">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#form" data-toggle="tab"><?php echo L::tabs_message;?>
</a></li>
        <li><a href="#attach" data-toggle="tab"><?php echo L::tabs_files;?>
</a></li>
        <li class="pull-right">
            <button class="btn btn-default btn-message-form-pane-toggler pull-right">
                <i class="fa fa-times"></i><span class="hidden-xs"> <?php echo L::text_close;?>
</span>
            </button>
        </li>
        <li class="pull-right">
            &nbsp;
        </li>
        <li class="pull-right">
            <select class="selectpicker" name="message_data[style]" data-width="auto">
                <option value="" data-content="<span class='label alert-default'>Без стиля</span>">Без стиля</option>
                <option value="info" data-content="<span class='label alert-info'>Info</span>">Info</option>
                <option value="success" data-content="<span class='label alert-success'>Success</span>">Success</option>
                <option value="warning" data-content="<span class='label alert-warning'>Warning</span>">Warning</option>
                <option value="danger" data-content="<span class='label alert-danger'>Danger</span>">Danger</option>
            </select>
        </li>
    </ul>
</div>

<div class="ui-layout-content">
    <div class="container-fluid">
        <div class="tab-content">
            <div class="tab-pane active" id="form">
                <?php /*  Call merged included template "demands/view/messages/form.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("demands/view/messages/form.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a431751db54_39464091($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "demands/view/messages/form.tpl" */?>
            </div>
            <div class="tab-pane" id="attach">
                <?php /*  Call merged included template "helpers/attached_table.tpl" */
$_tpl_stack[] = $_smarty_tpl;
 $_smarty_tpl = $_smarty_tpl->setupInlineSubTemplate("helpers/attached_table.tpl", $_smarty_tpl->cache_id, $_smarty_tpl->compile_id, 0, null, array(), 0, '54125c5a431678e850-85303670');
content_5c5a4316911423_67416942($_smarty_tpl);
$_smarty_tpl = array_pop($_tpl_stack); 
/*  End of included template "helpers/attached_table.tpl" */?>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="space space-xs"></div>

    <div class="form-inline row">
        <div class="form-group col-sm-5">
            <label title="Кому отправить" for="message_data_to_eid"><span class="hidden-xs">Кому:</span><span class="visible-xs"><i class="fa fa-user"></i></span></label>
            <select class="selectpicker members-select col-sm-10" id="message_data_to_eid" name="message_data[to_eid]" data-style="btn-default" data-show-subtext="true" >
                <option value="0">Никому</option>
            </select>
        </div>

        <div class="form-group col-sm-5">
            <label title="Поставить в копию" for="message_data_copy_eid"><span class="hidden-xs">Копия:</span><span class="visible-xs"><i class="fa fa-users"></i></span></label>
            <select id="message_data_copy_eid" class="selectpicker members-select col-sm-10" multiple name="message_data[copy_eid][]" data-selected-text-format="count" data-style="btn-default" data-show-subtext="true" data-live-search="true">
            </select>
        </div>

        <div class="form-group pull-right text-right col-sm-2">
            <button type="submit" class="btn btn-primary" data-loading-text="Отправка, ждите..."><i class="fa fa-send"></i><span class="hidden-xs"> Отправить</span></button>
        </div>

    </div>

    
</div>




    <?php echo '<script'; ?>
>
        /*$("#message-form").on("submit", function() {

            var $btn = $(this).find("button[type=submit]");
            var $form = $(this);
            var demand_id = $form.find("input[name='message_data[demand_id]']").val();

            $btn.button('loading');

            var message = encodeURIComponent($form.find("textarea[name='message_data[message]']").code());

            $.ajax({
                method: 'post',
                url: "demands/view/"+demand_id+"/add_message/",
                data: 'message='+message+'&'+$("#attach_files").find("input").serialize(),
                dataType: 'json',
                success: function(response) {

                    $btn.button("reset");
                    $form.find("textarea").code('');
                    $form.find(".btn-message-form-pane-toggler").click();

                    setTimeout(function() {
                        toastr.success('Сообщение успешно добавлено к заявке!', 'Сообщение отправлено');
                        //$('#demand-tabs').find('a[href="#demand-messages"]').tab('show');
                        $("#messages-container").closest('.ui-layout-pane').scrollTo($(response.data).hide().addClass("animated fadeInUp").appendTo("#messages-container").show(), 500);
                    }, 250);

                }
            });

            return false;
        });*/

/*
        function get_member_options() {
            var $form       = $("#message-form");
            var $to         = $form.find("select.members-select");
            var $btn        = $form.find("button[type=submit]");
            var demand_id   = $form.find("input[name='message_data[demand_id]']").val();

            $to.html("<option>Загрузка участников...</option>").prop('disabled',true).selectpicker("refresh");
            $btn.prop('disabled', true);

            $.ajax({
                method: 'post',
                url: "demands/view/"+demand_id+"/get_members_option/",
                dataType: 'json',
                success: function(response) {
                    $to.html(response.data).prop('disabled',false).selectpicker("refresh");
                    $btn.prop('disabled', false);
                }
            });
        }
            */

        /*
        $(document).ready(function(){
            var demand_id   = $("#message-form").find("input[name='message_data[demand_id]']").val();
            if (demand_id) {
                get_member_options();
            }
        });*/

    <?php echo '</script'; ?>
>


<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\messages\form.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a431751db54_39464091')) {function content_5c5a431751db54_39464091($_smarty_tpl) {?><textarea name="message_data[message]" style="border:0px; height: 99%; width:100%" placeholder="Нажмите CTRL+Enter отправки сообщения"></textarea>

<?php }} ?>
<?php /* Smarty version Smarty-3.1.21-dev, created on 2019-02-06 05:14:47
         compiled from "W:\home\intrawork.loc\app\applications\views\templates\demands\view\message_form_pane_toggler.tpl" */ ?>
<?php if ($_valid && !is_callable('content_5c5a4317535251_28307283')) {function content_5c5a4317535251_28307283($_smarty_tpl) {?><button id="btn-message-form-pane-toggler" class="btn btn-success btn-xs btn-message-form-pane-toggler">Добавить сообщение</button>

<style>
    #btn-message-form-pane-toggler {
        position: absolute; z-index:5; left:50%;
        margin-left:-75px;
        width:150px;
        bottom:0;
        /*-webkit-border-radius: 4px 4px 0 0;
        -moz-border-radius: 4px 4px 0 0;
        border-radius: 4px 4px 0 0;*/
        border-radius: 0;
    }
</style>
<?php }} ?>
